{"version":3,"sources":["oktopad.svg","katejs-trigger/lib/structure.js","katejs-trigger/lib/AppClient.js","katejs-fields/lib/structure.js","katejs-fields/lib/forms/ExtraFieldsItemMixin.js","katejs-fields/lib/AppClient.js","katejs-fields/lib/forms/ExtraFieldsListItem.js","katejs-runtime-modules/lib/AppClient.js","katejs-runtime-modules/lib/structure.js","structure.js","forms/NoteItem.js","forms/NoteList.js","forms/ProductSalesReport.js","forms/OrderToDeliverReport.js","forms/OrderList.js","forms/ClientDebt.js","forms/ClientSelection.js","forms/OrderItem.js","forms/PaymentItem.js","forms/CashFlow.js","forms/OrderDynamics.js","forms/ClientListMixin.js","forms/ClientSales.js","forms/ClientItemMixin.js","utils.js","forms/Dashboard.js","forms/ExpenseItem.js","forms/ReceiptItemMixin.js","forms/ProducsFlowReport.js","forms/DebtsFlowReport.js","forms/ProductCard.js","forms/DealItem.js","forms/TaskItem.js","forms/DealList.js","forms/SaleSchemaItem.js","forms/TaskList.js","forms/InvoiceItem.js","components/Kanban.js","components/index.js","updates.js","icons.js","AppClient.js","forms/ProductItemMixin.js","translations.js","index.js"],"names":["module","exports","structures","Trigger","fields","name","type","Fields","STRING","tables","AppClient","parent","params","init","addToMenu","use","package","ExtraFieldsList","REFERENCE","entity","ExtraFieldValuesList","EntityFieldsValuesList","skipForForm","FieldType","FieldTypeOptions","Object","keys","map","key","title","value","getExtraElement","field","index","id","Elements","INPUT","Form","args","app","fieldsLists","constructor","existingCard","elements","get","extraElementsCard","CARD","push","a","result","this","uuid","query","where","entityUuid","limit","response","length","extraFieldsvalues","values","forEach","findIndex","f","content","formValues","getValues","save","extraFieldsApplied","forms","ExtraFieldsListItem","fieldsTable","fieldType","columns","find","column","dataPath","SELECT","options","selectValue","set","entitiesWithExtraFields","splice","updateExtraFieldsLists","menu","item","form","successAuth","reduce","acc","val","entityName","concat","fieldsList","formName","endsWith","indexOf","ExtraFieldsItemMixin","settings","modules","i","default","AppSettings","client","attributes","sum","DECIMAL","precision","total","contractor","amount","user","contact","products","Note","BOOLEAN","TEXT","Client","Product","skipForList","Order","Invoice","Cashbox","Payment","Expense","DebtRecord","resources","MoneyRecord","ProductRecord","PriceType","PriceList","Receipt","SaleSchema","Deal","INTEGER","DealComment","DATE","Task","Contact","Settings","NoteItem","GRID","cols","getElement","TABS","getTableElement","width","ItemForm","addActions","doneFilter","noteDone","NoteList","showAll","filters","undefined","load","actions","SWITCH","panelStyle","onChange","col","format","ListForm","addElements","OrderReport","formReport","startDate","endDate","report","moment","startOf","endOf","t","data","timeFormat","Date","BUTTON","onClick","TABLE","date","showNegative","$gte","$lte","order","clients","balance","clientUuid","debts","row","debt","toPay","CHECKBOX","clientQuery","$or","$like","phone","address","clientChange","ordersClientFilter","maxWidth","unshift","getOptions","doc","ClientDebt","showModal","clientDebtModal","open","exec","rowClick","docUuid","assign","reportElements","LABEL","tag","style","sale","payment","fullWidth","MODAL","turnover","totals","docTitle","clientDebtData","clientDebtTitle","addCondition","ClientSelection","replaceSelect","changePhoneAddress","openOnFocus","clientSelect","clientSelection","clientSelectionModal","searchChange","timeout","clearTimeout","setTimeout","search","findTitle","findPhone","findAddress","clientSearch","selectClient","create","fieldValid","body","put","clientInput","GROUP","error","ProductsTable","rowChange","price","toFixed","sumChange","productChange","product","priceTypeContent","priceType","priceTypeUuid","prices","onSumChange","OrderItemMixin","print","companyName","template","productsTable","marginTop","textAlign","vars","currentInvoiceData","comment","PaymentItem","fillByDebts","payments","filter","clientpayments","getOptionsClient","table","onDelete","joinRecord","noDetails","records","increase","decrease","start","record","val1","val2","res","cellStyle","fontWeight","Cashflow","Promise","all","periodStart","$gt","periodEnd","details","cashbox","OrderDynamics","noOptions","$func","fn","group","$col","ClientSales","clientSalesModal","raw","clientSalesData","clientSalesOrders","clientSalesOrdersSum","clientSalesOrdersAverage","reportStyle","maxHeight","overflowY","wholeDay","Dashboard","next","add","prev","div","display","marginRight","loadOrdersCount","loadProductSales","ordersTotalsLabel","productSalesData","ExpenseItem","Itemform","ProductTable","ProductsFlowReport","DebtsFlowReport","ProductCard","productUuid","rest","pcRest","pcTable","document","dateStyle","fontSize","userStyle","commentStyle","taskStyle","cursor","textDecoration","taskDoneStyle","mapDate","obj","mapHistory","events","element","done","openTask","color","primaryColor","generatedElements","cut","salesman","schema","step","dealClosed","addTask","onKeyPress","keyPress","postComment","toClient","commentText","dealUuid","fillHistory","fillSteps","comments","tasks","history","sort","b","currentDeal","currentClient","steps","schemas","stepIndex","event","topRow","close","ok","deal","window","back","kanbanStyles","container","justifyContent","overflowX","columnContainer","columnHeader","columnDragOver","background","itemDragging","defaultSchema","schemaFilter","schemaChange","isBoard","isBoardDeals","isHideClosed","isHideClosedDeals","topPanel","userChange","disabled","allow","changeView","hideClosedChange","marginLeft","list","stepFormat","hidden","board","styles","itemClick","boardItemClick","onDragEnd","orderSaveKey","userColIndex","userColumn","closedColIndex","closedColumn","setFilters","schemaUuid","hideClosed","userUuid","setBoardData","items","destination","droppableId","source","targetStepIndex","replace","draggableId","fetchSchemas","doneStyle","isBoardTasks","isHideDone","isHideDoneTasks","hideDoneChange","hideDone","edge","toDate","getTime","task","timestamp","colIndex","targetDate","subtract","productTable","saveOrder","colOrder","accItems","localStorage","setItem","JSON","stringify","Kanban","props","setColumns","setState","state","userStyles","height","flexDirection","alignItems","padding","minHeight","userSelect","margin","backgroundColor","nextProps","parse","getItem","colsData","itemOrder","Number","MAX_SAFE_INTEGER","restoreOrder","slice","newColumns","sourceColumn","destColumn","sourceItems","destItems","removed","copiedItems","provided","snapshot","droppableProps","ref","innerRef","isDraggingOver","draggableProps","dragHandleProps","isDragging","placeholder","Component","description","OrderList","viewBox","fill","d","OrdersMy","OrdersUnassigned","CashFlow","xmlns","version","ProductList","ClientList","OrdersToDeliverReport","ProductSalesReport","x","y","CashboxList","ExpenseList","PaymentList","points","cx","cy","r","ReceiptList","PriceListList","PriceTypeList","TaskList","DealList","InvoiceList","components","Components","baseUrl","env","apiUrl","icon","icons","rule","method","submenu","OrderItem","changeTimeout","ClientItem","clientDebt","clientSales","invoice","ProductItem","productCard","setCardVisibility","showCard","accountBalances","pcGrid","pcGridRight","DealItem","TaskItem","SaleSchemaItem","InvoiceItem","ReceiptItem","ReceiptItemMixin","PriceListItem","saveAuth","docsContent","updates","userAuthorization","usernameTitle","userHideRecovery","docsAccessFilter","docsItem","sitem","menuItem","submenuItem","settingsParams","spliceMenuItem","supportRule","getMenuItem","initSubmenu","addSubmenu","allowCreateInSelect","showUsersList","school","nameInitial","nameTarget","submenuTitle","role","submenuName","itemName","itemIndex","itemTitle","AppUser","AppDoc","AppPrint","AppDocs","AppImport","AppTrigger","AppFields","AppModules","path","logo","translate","languages","ru","translations","KateJSClient"],"mappings":"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","file":"static/js/main.9ae3119b.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/oktopad.c808653c.svg\";","import Fields from 'katejs/lib/fields';\n\nconst Trigger = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n    {\n      name: 'conditionEntity',\n      type: Fields.STRING,\n    },\n    {\n      name: 'condition',\n      type: Fields.STRING,\n    },\n    {\n      name: 'actionEntity',\n      type: Fields.STRING,\n    },\n    {\n      name: 'actionEntityUuid',\n      type: Fields.STRING,\n    }\n  ],\n  tables: [\n    {\n      name: 'actionEntityFields',\n      fields: [\n        {\n          name: 'field',\n          type: Fields.STRING,\n        },\n        {\n          name: 'value',\n          type: Fields.STRING,\n        }\n      ],\n    },\n  ],\n};\n\nexport const structures = {\n  Trigger,\n};\nexport const packageName = 'katejs-trigger';\n","import { use } from 'katejs/lib/client';\n\nimport { packageName, structures } from './structure';\n\nconst AppClient = parent => class Client extends use(parent) {\n  constructor(params) {\n    super(params);\n\n    this.init({ structures, addToMenu: true });\n  }\n};\nAppClient.package = packageName;\nexport default AppClient;\n","import Fields from 'katejs/lib/fields';\n\nconst ExtraFieldsList = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n    {\n      name: 'entityName',\n      type: Fields.STRING,\n    },\n  ],\n  tables: [\n    {\n      name: 'fieldsList',\n      fields: [\n        {\n          name: 'name',\n          type: Fields.STRING,\n        },\n        {\n          name: 'type',\n          type: Fields.STRING,\n        },\n        {\n          name: 'values',\n          type: Fields.REFERENCE,\n          entity: 'ExtraFieldValuesList',\n        },\n        {\n          name: 'entityName',\n          type: Fields.STRING,\n        },\n      ],\n    },\n  ],\n};\n\nconst ExtraFieldValuesList = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n  ],\n  tables: [\n    {\n      name: 'values',\n      fields: [\n        {\n          name: 'value',\n          type: Fields.STRING,\n        },\n      ],\n    }\n  ],\n};\n\nconst EntityFieldsValuesList = {\n  skipForForm: true,\n  fields: [\n    {\n      name: 'entityUuid',\n      type: Fields.STRING,\n    },\n  ],\n  tables: [\n    {\n      name: 'values',\n      fields: [\n        {\n          name: 'name',\n          type: Fields.STRING,\n        },\n        {\n          name: 'value',\n          type: Fields.STRING,\n        },\n        {\n          name: 'valueTitle',\n          type: Fields.STRING,\n        }\n      ],\n    }\n  ],\n};\n\nexport const FieldType = {\n  'Numeric': 'Numeric',\n  'String': 'String',\n  'Date': 'Date',\n  'Reference': 'Reference',\n  'Select': 'Select',\n};\n\nexport const FieldTypeOptions = Object.keys(FieldType).map(key => ({\n  title: key,\n  value: FieldType[key],\n}));\n\nexport const structures = {\n  ExtraFieldsList,\n  ExtraFieldValuesList,\n  EntityFieldsValuesList,\n};\nexport const packageName = 'katejs-fields';\n","import { Elements } from 'katejs/lib/client';\r\n\r\nconst EXTRA_FIELD = 'extraField';\r\n\r\nconst getExtraElement = (field, index) => {\r\n  const element = {\r\n    id: `${EXTRA_FIELD}${index}`,\r\n    title: field.name,\r\n    type: Elements.INPUT,\r\n  };\r\n  return element;\r\n};\r\n\r\nexport default Form => class FormWithExtraFields extends Form {\r\n  static extraFieldsApplied = true;\r\n  constructor(args) {\r\n    super(args);\r\n    if (this.app.fieldsLists && this.app.fieldsLists[this.constructor.entity]) {\r\n      const existingCard = this.elements.get('extraFields');\r\n      const extraElementsCard = existingCard || {\r\n        id: 'extraFields',\r\n        type: Elements.CARD,\r\n      };\r\n      extraElementsCard.elements = this.app.fieldsLists[this.constructor.entity].map(getExtraElement);\r\n      if (!existingCard) {\r\n        this.elements.push(extraElementsCard);\r\n      }\r\n    }\r\n  }\r\n  async load() {\r\n    const result = await super.load();\r\n    if (this.app.fieldsLists && this.app.fieldsLists[this.constructor.entity] && this.uuid) {\r\n      const { response } = await this.app.EntityFieldsValuesList.query({\r\n        where: { entityUuid: this.uuid },\r\n        limit: 1,\r\n      });\r\n      if (response && response.length) {\r\n        const [ { values: extraFieldsvalues } ] = response;\r\n        const fields = this.app.fieldsLists[this.constructor.entity];\r\n        extraFieldsvalues.forEach((field) => {\r\n          const index = fields.findIndex(f => f.name === field.name);\r\n          if (index > -1) {\r\n            this.content[`${EXTRA_FIELD}${index}`].value = field.value;\r\n          }\r\n        });\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n  async save() {\r\n    await super.save();\r\n    const formValues = this.getValues();\r\n    const fields = this.app.fieldsLists[this.constructor.entity];\r\n    if (fields) {\r\n      const values = fields.map((field, index) => ({\r\n        name: field.name,\r\n        value: formValues[`extraField${index}`],\r\n      }));\r\n      this.app.EntityFieldsValuesList.save({ uuid: this.uuid, values });\r\n    }\r\n  }\r\n}\r\n","import { use } from 'katejs/lib/client';\r\n\r\nimport { packageName, structures } from './structure';\r\n\r\nimport ExtraFieldsListItem from './forms/ExtraFieldsListItem';\r\nimport ExtraFieldsItemMixin from './forms/ExtraFieldsItemMixin';\r\n\r\nconst AppClient = parent => class Client extends use(parent) {\r\n  constructor(params) {\r\n    super(params);\r\n    this.init({ structures, addToMenu: true });\r\n    this.forms = {\r\n      ...this.forms,\r\n      ExtraFieldsListItem: ExtraFieldsListItem(this.forms.ExtraFieldsListItem),\r\n    };\r\n\r\n    this.entitiesWithExtraFields = [];\r\n    const extraFieldsList = this.menu.find(item => item.form === 'ExtraFieldsListList');\r\n    extraFieldsList.title = 'Extra fields  lists'; // двойной пробел для перевода только меню\r\n  }\r\n  async afterInit() {\r\n    if (super.afterInit) await super.afterInit();\r\n\r\n    if (!this.successAuth) {\r\n      await this.updateExtraFieldsLists();\r\n    }\r\n  }\r\n  async afterUserInit() {\r\n    if (super.afterUserInit) await super.afterUserInit();\r\n    await this.updateExtraFieldsLists();\r\n  }\r\n  async updateExtraFieldsLists() {\r\n    const { response: fieldsLists } = await this.ExtraFieldsList.query();\r\n    if (!fieldsLists ) return;\r\n    this.fieldsLists = fieldsLists.reduce((acc, val) => {\r\n      acc[val.entityName] = acc[val.entityName] || [];\r\n      acc[val.entityName] = acc[val.entityName].concat(val.fieldsList);\r\n      return acc;\r\n    }, {});\r\n    Object.keys(this.forms).forEach((formName) => {\r\n      if (\r\n        formName.endsWith('Item')\r\n        && this.entitiesWithExtraFields.indexOf(this.forms[formName].entity) > -1\r\n        && !this.forms[formName].extraFieldsApplied\r\n      ) {\r\n        this.forms[formName] = ExtraFieldsItemMixin(this.forms[formName]);\r\n      }\r\n    });\r\n  }\r\n};\r\nAppClient.package = packageName;\r\nexport default AppClient;\r\n","import { Elements } from 'katejs/lib/client';\r\nimport { FieldTypeOptions } from '../structure';\r\n\r\nexport default Form => class ExtraFieldsItem extends Form {\r\n  constructor(args) {\r\n    super(args);\r\n    const fieldsTable = this.elements.get('fieldsList');\r\n    const fieldType = fieldsTable.columns.find(column => column.dataPath === 'type');\r\n    fieldType.type = Elements.SELECT;\r\n    fieldType.options = FieldTypeOptions;\r\n    fieldType.selectValue = true;\r\n    this.elements.set('entityName', {\r\n      ...this.elements.get('entityName'),\r\n      type: Elements.SELECT,\r\n      selectValue: true,\r\n      options: this.app.entitiesWithExtraFields.map(entity => ({\r\n        title: entity,\r\n        value: entity,\r\n      })),\r\n    });\r\n\r\n    // temporary disable extra\r\n    fieldsTable.columns.splice(2,3);\r\n  }\r\n  async save() {\r\n    await super.save();\r\n    this.app.updateExtraFieldsLists();\r\n  }\r\n}\r\n","import { use } from 'katejs/lib/client';\nimport { AppSettings } from 'katejs-modules/lib/client';\n\nimport { packageName } from './structure';\n\nconst AppClient = parent => class Client extends use(parent, AppSettings) {\n  async afterInit() {\n    if (super.afterInit) {\n      await super.afterInit();\n    }\n    if (this.settings) {\n      const modules = this.settings.modules || [];\n      for (let i = 0; i < modules.length; i++) {\n        const m = await this.modules[modules[i]]();\n        m.default(this);\n      }\n    }\n  }\n};\nAppClient.package = packageName;\nexport default AppClient;\n","\nexport const packageName = 'katejs-runtime-modules';\n","import Fields from 'katejs/lib/fields';\n\nexport const fields = {\n  client: {\n    name: 'client',\n    type: Fields.REFERENCE,\n    entity: 'Client',\n    attributes: ['uuid', 'title', 'phone', 'address'],\n  },\n  sum: {\n    name: 'sum',\n    type: Fields.DECIMAL,\n    length: 10,\n    precision: 2,\n  },\n  total: {\n    name: 'total',\n    type: Fields.DECIMAL,\n    length: 10,\n    precision: 2,\n  },\n  contractor: {\n    name: 'contractor',\n    type: Fields.REFERENCE,\n    entity: 'Client',\n  },\n  amount: {\n    name: 'amount',\n    type: Fields.DECIMAL,\n    length: 10,\n    precision: 2,\n  },\n  user: {\n    name: 'user',\n    type: Fields.REFERENCE,\n    entity: 'User',\n  },\n  contact: {\n    name: 'contact',\n    type: Fields.REFERENCE,\n    entity: 'Contact',\n  },\n};\n\nexport const tables = {\n  products: {\n    name: 'products',\n    fields: [\n      {\n        name: 'product',\n        type: Fields.REFERENCE,\n        entity: 'Product',\n        attributes: ['uuid', 'title', 'accountBalances'],\n      },\n      fields.amount,\n      {\n        name: 'price',\n        type: Fields.DECIMAL,\n        length: 10,\n        precision: 2,\n      },\n      fields.sum,\n    ],\n  },\n};\n\nconst Note = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n    {\n      name: 'noteDone',\n      type: Fields.BOOLEAN,\n    },\n    {\n      name: 'description',\n      type: Fields.TEXT,\n    },\n  ],\n  tables: [\n    {\n      name: 'checklist',\n      fields: [\n        {\n          name: 'done',\n          type: Fields.BOOLEAN,\n        },\n        {\n          name: 'description',\n          type: Fields.STRING,\n        },\n      ],\n    },\n  ],\n};\n\nconst Client = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n    {\n      name: 'phone',\n      type: Fields.STRING,\n    },\n    {\n      name: 'address',\n      type: Fields.STRING,\n    },\n  ],\n};\n\nconst Product = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n    {\n      name: 'price',\n      type: Fields.DECIMAL,\n      length: 10,\n      precision: 2,\n    },\n    {\n      name: 'accountBalances',\n      type: Fields.BOOLEAN,\n      skipForList: true,\n    },\n  ],\n};\n\n\nconst Order = {\n  fields: [\n    fields.client,\n    {\n      name: 'phone',\n      type: Fields.STRING,\n    },\n    {\n      name: 'address',\n      type: Fields.STRING,\n    },\n    fields.total,\n    {\n      name: 'comment',\n      type: Fields.STRING,\n    },\n    {\n      name: 'cashbox',\n      type: Fields.REFERENCE,\n      entity: 'Cashbox',\n      skipForList: true,\n    },\n    {\n      ...fields.total,\n      name: 'payment',\n    },\n  ],\n  tables: [\n    tables.products,\n  ],\n};\n\n\nconst Invoice = {\n  fields: [\n    fields.client,\n    fields.total,\n    {\n      name: 'comment',\n      type: Fields.STRING,\n    },\n  ],\n  tables: [\n    tables.products,\n  ],\n};\n\nconst Cashbox = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n  ],\n};\n\nconst Payment = {\n  fields: [\n    {\n      name: 'cashbox',\n      type: Fields.REFERENCE,\n      entity: 'Cashbox',\n    },\n    fields.total,\n    {\n      name: 'comment',\n      type: Fields.STRING,\n    },\n  ],\n  tables: [\n    {\n      name: 'clientpayments',\n      fields: [\n        fields.client,\n        fields.sum,\n      ],\n    },\n  ],\n};\n\nconst Expense = {\n  fields: [\n    {\n      name: 'cashbox',\n      type: Fields.REFERENCE,\n      entity: 'Cashbox',\n    },\n    fields.contractor,\n    fields.total,\n    {\n      name: 'comment',\n      type: Fields.STRING,\n    },\n  ],\n};\n\nconst DebtRecord = {\n  skipForForm: true,\n  fields: [\n    fields.client,\n  ],\n  resources: [\n    fields.sum,\n  ],\n};\n\nconst MoneyRecord = {\n  skipForForm: true,\n  fields: [\n    {\n      name: 'cashbox',\n      type: Fields.REFERENCE,\n      entity: 'Cashbox',\n    },\n  ],\n  resources: [\n    fields.sum,\n  ],\n};\n\nconst ProductRecord = {\n  skipForForm: true,\n  fields: [\n    {\n      name: 'product',\n      type: Fields.REFERENCE,\n      entity: 'Product',\n    },\n  ],\n  resources: [\n    fields.amount,\n  ],\n};\n\nconst PriceType = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n  ],\n};\n\nconst PriceList = {\n  fields: [\n    {\n      name: 'priceType',\n      type: Fields.REFERENCE,\n      entity: 'PriceType',\n    },\n  ],\n  tables: [\n    {\n      name: 'products',\n      fields: [\n        {\n          name: 'product',\n          type: Fields.REFERENCE,\n          entity: 'Product',\n        },\n        {\n          name: 'price',\n          type: Fields.DECIMAL,\n          length: 10,\n          precision: 2,\n        },\n      ],\n    },\n  ],\n};\n\nconst Receipt = {\n  fields: [\n    fields.contractor,\n    fields.total,\n    {\n      name: 'priceType',\n      type: Fields.REFERENCE,\n      entity: 'PriceType',\n    },\n  ],\n  tables: [\n    tables.products,\n  ],\n};\n\nconst SaleSchema = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n  ],\n  tables: [\n    {\n      name: 'steps',\n      fields: [\n        {\n          name: 'name',\n          type: Fields.STRING,\n        },\n      ],\n    }\n  ]\n};\n\nconst Deal = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n    fields.client,\n    fields.contact,\n    fields.user,\n    {\n      name: 'schema',\n      type: Fields.REFERENCE,\n      entity: 'SaleSchema',\n    },\n    {\n      name: 'stepIndex', // index from sale schema\n      type: Fields.INTEGER,\n    },\n    {\n      name: 'dealClosed',\n      type: Fields.BOOLEAN,\n    },\n  ],\n};\n\nconst DealComment = {\n  skipForForm: true,\n  fields: [\n    {\n      name: 'deal',\n      type: Fields.REFERENCE,\n      entity: 'Deal',\n    },\n    {\n      name: 'date',\n      type: Fields.DATE,\n    },\n    {\n      name: 'user',\n      type: Fields.REFERENCE,\n      entity: 'User',\n    },\n    {\n      name: 'comment',\n      type: Fields.STRING,\n    },\n  ],\n};\n\nconst Task = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n    {\n      name: 'date',\n      type: Fields.DATE,\n    },\n    {\n      name: 'done',\n      type: Fields.BOOLEAN,\n    },\n    fields.client,\n    fields.contact,\n    {\n      name: 'deal',\n      type: Fields.REFERENCE,\n      entity: 'Deal',\n    },\n    fields.user,\n  ],\n};\n\nconst Contact = {\n  fields: [\n    {\n      name: 'title',\n      type: Fields.STRING,\n    },\n    fields.client,\n  ],\n};\n\nexport const Settings = {\n  fields: [\n    {\n      name: 'defaultSchema',\n      type: Fields.REFERENCE,\n      entity: 'SaleSchema',\n    },\n    {\n      name: 'companyName',\n      type: Fields.STRING,\n    },\n    {\n      name: 'companyInn',\n      type: Fields.STRING,\n    },\n    {\n      name: 'companyKpp',\n      type: Fields.STRING,\n    },\n    {\n      name: 'companyBankName',\n      type: Fields.STRING,\n    },\n    {\n        name: 'companyBankCode',\n      type: Fields.STRING,\n    },\n    {\n      name: 'companyBankCorrAccount',\n      type: Fields.STRING,\n    },\n    {\n      name: 'companyBankAccount',\n      type: Fields.STRING,\n    },\n  ],\n};\n\nexport const title = 'Oktopad CRM';\nexport const packageName = 'oktopad-crm';\nexport const structures = {\n  DealComment,\n  Contact,\n  SaleSchema,\n  Deal,\n  Task,\n  ProductRecord,\n  MoneyRecord,\n  DebtRecord,\n  Note,\n  Cashbox,\n  PriceType,\n  PriceList,\n  Product,\n  Receipt,\n  Expense,\n  Payment,\n  Client,\n  Invoice,\n  Order,\n};\n","import { Elements, getElement, getTableElement, ItemForm } from 'katejs/lib/client';\nimport { structures } from '../structure';\n\nconst { Note } = structures;\n\nclass NoteItem extends ItemForm({ Note }, { addActions: true }) {\n  constructor(params) {\n    super(params);\n\n    this.elements.push(\n      {\n        id: 'grid',\n        type: Elements.GRID,\n        elements: [\n          { cols: 8, ...getElement(Note.fields[0], this) }, // title\n          { cols: 4, ...getElement(Note.fields[1], this) }, // noteDone\n        ],\n      },\n      {\n        id: 'tabs',\n        type: Elements.TABS,\n        elements: [\n          {\n            title: 'Description',\n            elements: [\n              getElement(Note.fields[2], this),\n            ],\n          },\n          {\n            title: 'Checklist',\n            elements: [\n              getTableElement(Note.tables[0], this),\n            ],\n          },\n        ],\n      },\n    );\n\n    this.elements.get('checklist').columns[0].width = 50;\n  }\n}\n\nexport default NoteItem;\n","import { Elements, ListForm } from 'katejs/lib/client';\nimport { structures } from '../structure';\n\nconst doneFilter = { noteDone: false };\n\nconst { Note } = structures;\n\nclass NoteList extends ListForm({ Note }, { addActions: true, addElements: true }) {\n  static entity = 'Note'; // for menu filter\n  constructor(params) {\n    super(params);\n\n    this.actions.push({\n      type: Elements.SWITCH,\n      id: 'showAll',\n      title: 'Show all',\n      value: false,\n      panelStyle: true,\n      onChange: this.showAll,\n    });\n    this.filters = doneFilter;\n    this.elements.get('list').columns.find(col => col.dataPath === 'noteDone').format\n      = val => (val ? '✔' : '');\n  }\n  showAll = (val) => {\n    this.filters = val ? undefined : doneFilter;\n    this.load();\n  }\n}\n\nexport default NoteList;\n","import { Elements, Form } from 'katejs/lib/client';\nimport moment from 'moment';\n\nexport default class OrderReport extends Form {\n  static title = 'Product sales';\n  static entity = 'Order';\n  constructor(args) {\n    super(args);\n    this.elements = [\n      {\n        id: 'startDate',\n        type: Elements.DATE,\n        title: 'Period start',\n        timeFormat: false,\n        value: new Date(),\n      },\n      {\n        id: 'endDate',\n        type: Elements.DATE,\n        title: 'Period end',\n        timeFormat: false,\n        value: new Date(),\n      },\n      {\n        id: 'formReport',\n        type: Elements.BUTTON,\n        title: 'Form report',\n        onClick: this.formReport,\n      },\n      {\n        id: 'data',\n        type: Elements.TABLE,\n        columns: [\n          {\n            title: 'Product',\n            dataPath: 'products.product.title',\n          },\n          {\n            title: 'Amount',\n            dataPath: 'amount',\n          },\n          {\n            title: 'Sum',\n            dataPath: 'sum',\n          },\n        ],\n      },\n    ];\n  }\n  formReport = async () => {\n    const { startDate, endDate } = this.getValues();\n    const { response } = await this.app.Order.report({\n      startDate: moment(startDate).startOf('day'),\n      endDate: moment(endDate).endOf('day'),\n    });\n    const total = {\n      'products.product.title': this.app.t('Total'),\n      sum: response.reduce((acc, val) => acc + val.sum, 0),\n    };\n    response.push(total);\n    this.content.data.value = response;\n  }\n}\n","import { Elements, Form } from 'katejs/lib/client';\nimport moment from 'moment';\n\nexport default class OrderReport extends Form {\n  static title = 'Orders to deliver';\n  static entity = 'Order';\n  constructor(args) {\n    super(args);\n    this.elements = [\n      {\n        id: 'date',\n        type: Elements.DATE,\n        title: 'Date',\n        timeFormat: false,\n        value: new Date(),\n      },\n      {\n        id: 'showNegative',\n        type: Elements.CHECKBOX,\n        title: 'Show negative sum',\n      },\n      {\n        id: 'formReport',\n        type: Elements.BUTTON,\n        title: 'Form report',\n        onClick: this.formReport,\n      },\n      {\n        id: 'data',\n        type: Elements.TABLE,\n        columns: [\n          {\n            title: 'Order',\n            dataPath: 'title',\n          },\n          {\n            title: 'Client',\n            dataPath: 'client.title',\n          },\n          {\n            title: 'Phone',\n            dataPath: 'phone',\n          },\n          {\n            title: 'Address',\n            dataPath: 'address',\n          },\n          {\n            title: 'Sum',\n            dataPath: 'total',\n          },\n          {\n            title: 'To pay',\n            dataPath: 'toPay',\n          },\n        ],\n      },\n    ];\n  }\n  formReport = async () => {\n    const { date, showNegative } = this.getValues();\n    const { response } = await this.app.Order.query({\n      where: {\n        date: {\n          $gte: moment(date).startOf('day'),\n          $lte: moment(date).endOf('day'),\n        },\n      },\n      order: [['client', 'title']],\n      limit: -1,\n    });\n\n    const clients = response.reduce((acc, order) => {\n      if (order.client && acc.indexOf(order.client.uuid) === -1) {\n        acc.push(order.client.uuid);\n      }\n      return acc;\n    }, []);\n    const { response: debts } =\n      await this.app.DebtRecord.balance({ date: moment(date).endOf('day'), where: { clientUuid: clients } });\n    response.forEach((row) => {\n      const debt = debts.find(item => item.clientUuid === (row.client && row.client.uuid));\n      // eslint-disable-next-line no-param-reassign\n      row.toPay = (!debt || (!showNegative && debt.sum) < 0) ? 0 : debt.sum;\n    });\n\n    this.content.data.value = response;\n  }\n}\n","import { Elements } from 'katejs/lib/client';\n\nexport default Form => class OrderList1 extends Form {\n  static entity = 'Order'; // for menu filter\n  static doc = true;\n  constructor(params) {\n    super(params);\n    const list = this.elements.get('list');\n    list.columns.find(column => column.dataPath === 'comment').maxWidth = 400;\n    this.elements.unshift({\n      type: Elements.GRID,\n      elements: [\n        {\n          id: 'client',\n          title: 'Client (name, phone, address)',\n          type: Elements.SELECT,\n          getOptions: this.clientQuery,\n          onChange: this.clientChange,\n          value: this.app.ordersClientFilter,\n          cols: 4,\n        },\n      ],\n    });\n\n    this.filters = this.filters || { clientUuid: (this.app.ordersClientFilter && this.app.ordersClientFilter.uuid) || undefined };\n  }\n  clientQuery = async (query) => {\n    const { response } = await this.app.Client.query({\n      where: { $or: [\n        { title: { $like: `%${query}%` } },\n        { phone: { $like: `%${query}%` } },\n        { address: { $like: `%${query}%` } },\n      ] },\n    });\n    return (response || []).map(item => ({ ...item, title: `${item.title} (${item.phone || ''} ${item.address || ''})` }));\n  };\n\n  clientChange = (val) => {\n    this.filters.clientUuid = (val && val.uuid) || undefined;\n    this.app.ordersClientFilter = val;\n    this.load();\n  }\n}\n","import { Elements } from 'katejs/lib/client';\n\nexport default class ClientDebt {\n  constructor(params) {\n    Object.assign(this, params);\n\n    const style = {};\n    const reportElements = [\n      {\n        id: 'clientDebtTitle',\n        type: Elements.LABEL,\n        title: 'Clients debt ',\n        tag: 'h4',\n      },\n      {\n        id: 'clientDebtData',\n        type: Elements.TABLE,\n        style,\n        rowClick: this.rowClick,\n        columns: [\n          {\n            title: 'Document',\n            dataPath: 'docTitle',\n          },\n          {\n            title: 'Sale',\n            dataPath: '',\n            format: val => val.sale || (val.sum > 0 ? val.sum : ''),\n          },\n          {\n            title: 'Payment',\n            dataPath: '',\n            format: val => val.payment || (val.sum < 0 ? -val.sum : ''),\n          },\n        ],\n        value: [],\n      },\n    ];\n\n    if (this.report) {\n      this.elements = reportElements;\n      this.exec(this.clientUuid);\n    } else {\n      this.elements = [\n        {\n          type: Elements.BUTTON,\n          title: 'Client debt',\n          onClick: this.showModal,\n          fullWidth: true,\n        },\n        {\n          id: 'clientDebtModal',\n          type: Elements.MODAL,\n          maxWidth: 'md',\n          open: false,\n          elements: reportElements,\n        },\n      ];\n    }\n  }\n  async exec(clientUuid) {\n    const { response: data } = await this.app.DebtRecord.turnover({\n      where: { clientUuid: clientUuid || this.content.client.value.uuid },\n      order: ['date'],\n    });\n    const totals = data.reduce((acc, val) => {\n      acc[2] += val.sum;\n      acc[0] += val.sum > 0 ? val.sum : 0;\n      acc[1] += val.sum < 0 ? -val.sum : 0;\n      return acc;\n    }, [0, 0, 0]);\n    data.push({\n      docTitle: this.app.t('Total'),\n      sale: totals[0],\n      payment: totals[1],\n    });\n    this.content.clientDebtData.value = data;\n    this.content.clientDebtTitle.title = this.app.t`Clients debt ${this.report ? '' : this.content.client.value.title}: ${totals[2]}`;\n  }\n  showModal = async () => {\n    this.content.clientDebtModal.open = true;\n    this.exec();\n  }\n  rowClick = (row) => {\n    if (this.report) {\n      this.app.open(`${row.entity}Item`, { id: row.docUuid });\n    }\n  }\n}\n","import { Elements } from 'katejs/lib/client';\nimport ClientDebt from './ClientDebt';\n\nconst addCondition = (where, field, value) => {\n  if (value) {\n    // eslint-disable-next-line no-param-reassign\n    where[field] = { $like: `%${value || ''}%` };\n  }\n};\n\nexport default class ClientSelection {\n  constructor({ form, replaceSelect, changePhoneAddress, openOnFocus }) {\n    this.elements = form.elements;\n    this.content = form.content;\n    this.app = form.app;\n\n    const clientInput = this.elements.get('client');\n    clientInput.openOnFocus = openOnFocus;\n    if (changePhoneAddress) {\n      clientInput.onChange = this.clientSelect;\n    }\n\n    if (replaceSelect) {\n      this.elements.set('client', {\n        id: 'clientGroup',\n        type: Elements.GRID,\n        elements: [\n          {\n            ...clientInput,\n            cols: 6,\n            getOptions: this.clientQuery,\n          },\n          {\n            type: Elements.BUTTON,\n            title: 'Find, create',\n            onClick: this.clientSelection,\n            fullWidth: true,\n            cols: 3,\n          },\n          {\n            type: Elements.GROUP,\n            elements: new ClientDebt({ content: this.content, app: this.app }).elements,\n            cols: 3,\n          },\n        ],\n      });\n    }\n    this.elements.push({\n      id: 'clientSelectionModal',\n      type: Elements.MODAL,\n      open: false,\n      title: 'Find, create client',\n      maxWidth: 'md',\n      elements: [\n        {\n          type: Elements.GRID,\n          elements: [\n            {\n              type: Elements.INPUT,\n              id: 'findTitle',\n              title: 'Title',\n              onChange: this.searchChange,\n              cols: 3,\n            },\n            {\n              type: Elements.INPUT,\n              id: 'findPhone',\n              title: 'Phone',\n              onChange: this.searchChange,\n              cols: 3,\n            },\n            {\n              type: Elements.INPUT,\n              id: 'findAddress',\n              title: 'Address',\n              onChange: this.searchChange,\n              cols: 3,\n            },\n            {\n              type: Elements.BUTTON,\n              title: 'Create',\n              onClick: this.create,\n              cols: 2,\n            },\n            {\n              type: Elements.LABEL,\n              cols: 2,\n            },\n          ],\n        },\n        {\n          id: 'clientSearch',\n          type: Elements.TABLE,\n          rowClick: this.selectClient,\n          columns: [\n            { title: 'Title', dataPath: 'title' },\n            { title: 'Phone', dataPath: 'phone' },\n            { title: 'Address', dataPath: 'address' },\n          ],\n        },\n      ],\n    });\n  }\n  clientSelect = (client) => {\n    if (client) {\n      this.content.address.value = client.address;\n      this.content.phone.value = client.phone;\n    }\n  }\n  clientSelection = () => {\n    this.content.clientSelectionModal.open = true;\n  }\n  searchChange = () => {\n    if (this.timeout) clearTimeout(this.timeout);\n    this.timeout = setTimeout(this.search, 300);\n  }\n  search = async () => {\n    const where = {};\n    addCondition(where, 'title', this.content.findTitle.value);\n    addCondition(where, 'phone', this.content.findPhone.value);\n    addCondition(where, 'address', this.content.findAddress.value);\n    const { response: clients } = await this.app.Client.query({ where, limit: 5 });\n    this.content.clientSearch.value = clients;\n  }\n  selectClient = (row) => {\n    this.content.client.value = row;\n    if (this.content.client.onChange) {\n      this.content.client.onChange(row);\n    }\n    this.content.clientSelectionModal.open = false;\n  }\n  fieldValid(field) {\n    if (!this.content[field].value) {\n      this.content[field].error = true;\n      return false;\n    }\n    this.content[field].error = false;\n    return true;\n  }\n  create = async () => {\n    if (!this.fieldValid('findTitle')) return;\n    if (!this.fieldValid('findPhone')) return;\n    if (!this.fieldValid('findAddress')) return;\n    const body = {\n      title: this.content.findTitle.value,\n      phone: this.content.findPhone.value,\n      address: this.content.findAddress.value,\n    };\n    await this.app.Client.put({ body });\n    this.search();\n  }\n  clientQuery = async (query) => {\n    const { response } = await this.app.Client.query({\n      where: {\n        $or: [\n          { title: { $like: `%${query || ''}%` } },\n          { phone: { $like: `%${query || ''}%` } },\n          { address: { $like: `%${query || ''}%` } },\n        ],\n      },\n    });\n    return (response || []).map(item => ({ ...item, title: `${item.title} (${item.phone || ''}${(item.phone && item.address) ? ',' : ''}${item.address || ''})` }));\n  }\n}\n","import { Elements } from 'katejs/lib/client';\n\nimport ClientSelection from './ClientSelection';\n\nimport { structures } from '../structure';\n\nexport class ProductsTable {\n  constructor(args) {\n    this.elements = args.elements;\n    this.content = args.content;\n    this.app = args.app;\n\n    this.elements.get('products').columns[1].onChange = this.productChange;\n    this.elements.get('products').columns[1].openOnFocus = true;\n    this.elements.get('products').columns[2].onChange = this.rowChange;\n    this.elements.get('products').columns[3].onChange = this.rowChange;\n  }\n  rowChange = (row) => {\n    // eslint-disable-next-line no-param-reassign\n    row.sum.value = (row.amount.value * row.price.value).toFixed(2);\n    this.sumChange();\n  }\n  productChange = async (row) => {\n    const { price, amount, product } = row;\n    if (!product.value) return;\n    const priceTypeContent = this.content.priceType;\n    const priceType = priceTypeContent && priceTypeContent.value;\n    const where = {\n      '$products.productUuid$': product.value.uuid,\n    };\n    // use selected price type, otherwise use pricelist without price type\n    where.priceTypeUuid = (priceType && priceType.uuid) || null;\n    const { response: prices } = await this.app.PriceList.query({\n      where,\n      order: [['date', 'DESC']],\n      limit: 1,\n    });\n    if (prices.length && prices[0].products.length) {\n      price.value = prices[0].products[0].price;\n    } else {\n      price.value = product.value.price;\n    }\n    if (!row.amount.value) {\n      amount.value = 1;\n    }\n    this.rowChange(row);\n  }\n  sumChange() {\n    const total = this.content.products.value\n      .reduce((acc, val) => (val.sum ? acc + (+val.sum) : acc), 0);\n    if (this.onSumChange) {\n      this.onSumChange(total.toFixed(2));\n    } else {\n      this.content.total.value = total.toFixed(2);\n    }\n  }\n}\n\nconst OrderItemMixin = Form => class OrderItem extends Form {\n  static doc = true;\n  constructor(params) {\n    super(params);\n    this.clientSelection = new ClientSelection({\n      form: this,\n      replaceSelect: true,\n      changePhoneAddress: true,\n      openOnFocus: true,\n    });\n    this.productsTable = new ProductsTable(this);\n    this.elements.set('phone', {\n      type: Elements.GRID,\n      elements: [\n        { ...this.elements.get('phone'), cols: 4 },\n        { ...this.elements.get('address'), cols: 8 },\n      ],\n    });\n    this.elements.splice(this.elements.findIndex(item => item.id === 'address'), 1);\n\n    this.elements.set('cashbox', {\n      type: Elements.GRID,\n      elements: [\n        {\n          type: Elements.LABEL,\n          title: 'Apply payment',\n          style: { marginTop: 28, textAlign: 'right' },\n          cols: 4,\n        },\n        {\n          ...this.elements.get('payment'),\n          cols: 4,\n        },\n        {\n          ...this.elements.get('cashbox'),\n          openOnFocus: true,\n          cols: 4,\n        },\n      ],\n    });\n    this.elements.splice(this.elements.findIndex(item => item.id === 'payment'), 1);\n\n    this.actions.push({\n      type: Elements.BUTTON,\n      title: 'Print',\n      onClick: this.print,\n    });\n  }\n  afterInit() {\n    if (super.afterInit) {\n      super.afterInit();\n    }\n    if (!this.uuid && this.app.vars.currentInvoiceData) {\n      const data = this.app.vars.currentInvoiceData;\n      this.content.client.value = data.client;\n      this.content.comment.value = data.comment;\n      this.content.products.value = data.products;\n      this.app.vars.currentInvoiceData = undefined;\n      this.productsTable.sumChange();\n    }\n  }\n  print = async () => {\n    const { response: doc } = await this.app.Order.get({ uuid: this.uuid });\n    const data = {\n      ...doc,\n      companyName: this.app.settings.companyName,\n    };\n    this.app.print({ template: 'Order', data });\n  }\n};\n\nexport default OrderItemMixin;\n\n// base print template\n// < !doctype html >\n//   <html lang=\"en\">\n//     <head>\n//       <!-- Required meta tags -->\n//     <meta charset=\"utf-8\">\n//         <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\">\n\n//           <!-- Bootstrap CSS -->\n//     <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" crossorigin=\"anonymous\">\n\n//             <title>{{ Order }}</title>\n//             <style>\n//               html, body {\n//                 width: 210mm;\n//               height: 297mm;\n//             }\n// </style>\n//   </head>\n//           <body>\n//             <div class=\"container\">\n//               <h3>{{ title }}</h3>\n//               <p>Компания: {{ companyName }}</p>\n//               <p>Клиент: {{ client.title }}</p>\n//               <table class=\"table\">\n//                 <tr>\n//                   <td>Товар</td>\n//                   <td>Кол-во</td>\n//                   <td>Цена</td>\n//                   <td>Сумма</td>\n//                 </tr>\n//                 {{#each products}}\n//                 <tr>\n//                   <td>{{ product.title }}</td>\n//                   <td>{{ amount }}</td>\n//                   <td>{{ price }}</td>\n//                   <td>{{ sum }}</td>\n//                 </tr>\n//                 {{/ each}}\n//                 <tr>\n//                   <td colspan=\"3\">Итого</td>\n//                   <td>{{ total }}</td>\n//                 </tr>\n//               </table>\n\n//             </div>\n//           </body>\n// </html>\n","import { Elements, ItemForm } from 'katejs/lib/client';\nimport { structures } from '../structure';\n\nconst { Payment } = structures;\n\n\nclass PaymentItem extends ItemForm({ Payment }, { addActions: true, addElements: true }) {\n  static doc = true;\n  constructor(params) {\n    super(params);\n    this.elements.get('cashbox').openOnFocus = true;\n    this.elements.get('clientpaymentsCardActions').elements.push(\n      {\n        type: Elements.BUTTON,\n        title: 'Fill by debts',\n        onClick: this.fillByDebts,\n      },\n    );\n    const table = this.elements.get('clientpayments');\n    table.columns[2].onChange = this.sumChange;\n    table.onDelete = this.sumChange;\n    table.columns[1].getOptions = this.getOptionsClient;\n  }\n  fillByDebts = async () => {\n    // заполняем по остаткам расчетом на дату документа.\n    const { response: debts } = await this.app.DebtRecord.balance({\n      date: this.content.date.value,\n    });\n    const payments = debts.map(debt => ({\n      client: debt.client,\n      sum: (!debt || debt.sum < 0) ? 0 : debt.sum,\n    })).filter(item => item.sum);\n    this.content.clientpayments.value = payments;\n    this.sumChange();\n  }\n  sumChange = () => {\n    const total = this.content.clientpayments.value\n      .reduce((acc, val) => (val.sum ? acc + (+val.sum) : acc), 0);\n    this.content.total.value = total.toFixed(2);\n  }\n  getOptionsClient = async (query) => {\n    const { response } = await this.app.Client.query({\n      where: {\n        $or: [\n          { title: { $like: `%${query || ''}%` } },\n          { phone: { $like: `%${query || ''}%` } },\n          { address: { $like: `%${query || ''}%` } },\n        ],\n      },\n    });\n    return (response || []).map(item => ({ ...item, title: `${item.title} (${item.phone || ''} ${item.address || ''})` }));\n  }\n}\n\nexport default PaymentItem;\n","import { Elements, Form } from 'katejs/lib/client';\nimport moment from 'moment';\n\nconst checkEqual = (val1, val2) => {\n  if (val1 === val2) return true;\n  if (val1 && val2) return val1.uuid === val2.uuid;\n  return false;\n};\n\nexport const joinRecord = ({ balance, turnover, fields, resources, noDetails }) => {\n  const data = [];\n  const totals = balance.map(item => ({\n    ...item,\n    records: [],\n    increase: 0,\n    decrease: 0,\n    start: item[resources[0]],\n    total: 0,\n  }));\n\n  turnover.forEach((record) => {\n    let total = totals.find(item => checkEqual(item[fields[0]], record[fields[0]]));\n    if (!total) {\n      total = {\n        [fields[0]]: record[fields[0]],\n        records: [],\n        increase: 0,\n        decrease: 0,\n        start: 0,\n        total: 0,\n      };\n      totals.push(total);\n    }\n    if (!noDetails) {\n      total.records.push(record);\n    }\n    const res = resources[0];\n    if (record[res] > 0) {\n      // eslint-disable-next-line no-param-reassign\n      record.increase = record[res];\n      total.increase += record[res];\n    }\n    if (record[res] < 0) {\n      // eslint-disable-next-line no-param-reassign\n      record.decrease = -record[res];\n      total.decrease -= record[res];\n    }\n  });\n  totals.forEach((total) => {\n    // eslint-disable-next-line no-param-reassign\n    total.total = (total.start + total.increase) - total.decrease;\n    data.push(total, ...total.records);\n  });\n\n  return data;\n};\n\nexport const cellStyle = (data) => {\n  if (data.docTitle) return {};\n  return { fontWeight: 'bold' };\n};\n\nexport default class Cashflow extends Form {\n  static title = 'Cash flow';\n  static entity = 'Cashbox';\n  constructor(args) {\n    super(args);\n    this.elements = [\n      {\n        type: Elements.GRID,\n        elements: [\n          {\n            id: 'periodStart',\n            type: Elements.DATE,\n            title: 'Period start',\n            timeFormat: false,\n            value: moment().startOf('week'),\n          },\n          {\n            id: 'periodEnd',\n            type: Elements.DATE,\n            title: 'Period end',\n            timeFormat: false,\n            value: moment().endOf('week'),\n          },\n          {\n            id: 'details',\n            type: Elements.CHECKBOX,\n            title: 'Detail to document',\n          },\n        ]\n      },\n      {\n        id: 'formReport',\n        type: Elements.BUTTON,\n        title: 'Form report',\n        onClick: this.formReport,\n      },\n      {\n        id: 'data',\n        type: Elements.TABLE,\n        cellStyle,\n        columns: [\n          {\n            id: 'cashbox',\n            title: 'Cashbox/Document',\n            dataPath: '',\n            format: val => (val.docTitle || (val.cashbox && val.cashbox.title)) || 'None',\n          },\n          {\n            title: 'Start',\n            dataPath: 'sum',\n          },\n          {\n            title: 'Increase',\n            dataPath: 'increase',\n          },\n          {\n            title: 'Decrease',\n            dataPath: 'decrease',\n          },\n          {\n            title: 'Total',\n            dataPath: 'total',\n          },\n        ],\n      },\n    ];\n  }\n  formReport = async () => {\n    const response = [];\n    this.content.data.value = response;\n\n    const [{ response: balance }, { response: turnover }] = await Promise.all([\n      this.app.MoneyRecord.balance({\n        date: moment(this.content.periodStart.value).startOf('day'),\n      }),\n      this.app.MoneyRecord.turnover({\n        where: {\n          date: {\n            $gt: moment(this.content.periodStart.value).startOf('day'),\n            $lte: moment(this.content.periodEnd.value).endOf('day'),\n          },\n        },\n      }),\n    ]);\n    this.content.data.value = joinRecord({ balance, turnover, fields: ['cashbox'], resources: ['sum'], noDetails: !this.content.details.value });\n  }\n}\n","import { Elements, Form } from 'katejs/lib/client';\nimport moment from 'moment';\n\nexport default class OrderDynamics extends Form {\n  static title = 'Order dynamics';\n  static entity = 'Order';\n  constructor(args) {\n    super(args);\n    this.elements = [\n      {\n        id: 'periodStart',\n        type: Elements.DATE,\n        title: 'Period start',\n        timeFormat: false,\n        value: moment().startOf('week'),\n      },\n      {\n        id: 'periodEnd',\n        type: Elements.DATE,\n        title: 'Period end',\n        timeFormat: false,\n        value: moment().endOf('week'),\n      },\n      {\n        id: 'formReport',\n        type: Elements.BUTTON,\n        title: 'Form report',\n        onClick: this.formReport,\n      },\n      {\n        id: 'data',\n        type: Elements.TABLE,\n        columns: [\n          {\n            id: 'date',\n            title: 'Date',\n            dataPath: 'day',\n            format: val => moment(val).format('DD.MM.YYYY'),\n          },\n          {\n            title: 'Amount',\n            dataPath: 'amount',\n          },\n          {\n            title: 'Sum',\n            dataPath: 'sum',\n          },\n        ],\n      },\n    ];\n  }\n  formReport = async () => {\n    const where = {\n      date: {\n        $gt: moment(this.content.periodStart.value).startOf('day'),\n        $lte: moment(this.content.periodEnd.value).endOf('day'),\n      },\n    };\n    const { response: data } = await this.app.Order.query({\n      noOptions: true,\n      attributes: [\n        [{ $func: { fn: 'DATE', col: 'date' } }, 'day'],\n        [{ $func: { fn: 'COUNT', col: 'uuid' } }, 'amount'],\n        [{ $func: { fn: 'SUM', col: 'total' } }, 'sum'],\n      ],\n      group: [{ $col: 'day' }],\n      order: [{ $col: 'day' }],\n      where,\n    });\n    this.content.data.value = data;\n  }\n}\n","import { Elements } from 'katejs/lib/client';\n\n\nexport default ListForm => class ClientList extends ListForm {\n  constructor(args) {\n    super(args);\n    this.elements.unshift({\n      type: Elements.GRID,\n      elements: [\n        {\n          id: 'client',\n          title: 'Search (name, phone, address)',\n          type: Elements.INPUT,\n          onChange: this.clientChange,\n          cols: 4,\n        },\n      ],\n    });\n  }\n  clientChange = () => {\n    if (this.changeTimeout) clearTimeout(this.changeTimeout);\n    this.changeTimeout = setTimeout(this.search, 400);\n  }\n  search = () => {\n    const query = this.content.client.value;\n    this.filters = {\n      $or: [\n        { title: { $like: `%${query}%` } },\n        { phone: { $like: `%${query}%` } },\n        { address: { $like: `%${query}%` } },\n      ],\n    };\n    this.load();\n  }\n};","import { Elements } from 'katejs/lib/client';\n\nexport default class ClientSales {\n  constructor(params) {\n    Object.assign(this, params);\n\n    const style = {};\n    const reportElements = [\n      {\n        id: 'clientSalesTitle',\n        type: Elements.LABEL,\n        title: 'Clients sales',\n        tag: 'h4',\n      },\n      {\n        id: 'clientSalesOrders',\n        type: Elements.LABEL,\n        title: 'Sales count',\n      },\n      {\n        id: 'clientSalesOrdersSum',\n        type: Elements.LABEL,\n        title: 'Sales sum',\n      },\n      {\n        id: 'clientSalesOrdersAverage',\n        type: Elements.LABEL,\n        title: 'Sales average sum',\n      },\n      {\n        id: 'clientSalesData',\n        type: Elements.TABLE,\n        style,\n        columns: [\n          {\n            title: 'Product',\n            dataPath: 'products.product.title',\n          },\n          {\n            title: 'Amount',\n            dataPath: 'amount',\n          },\n          {\n            title: 'Sum',\n            dataPath: 'sum',\n          },\n        ],\n        value: [],\n      },\n    ];\n\n    if (this.report) {\n      this.elements = reportElements;\n      this.exec(this.clientUuid);\n    } else {\n      this.elements = [\n        {\n          type: Elements.BUTTON,\n          title: 'Client sales',\n          onClick: this.showModal,\n        },\n        {\n          id: 'clientSalesModal',\n          type: Elements.MODAL,\n          maxWidth: 'md',\n          open: false,\n          elements: reportElements,\n        },\n      ];\n    }\n  }\n  async exec(clientUuid) {\n    const { response: data } = await this.app.Order.query({\n      attributes: [\n        [{ $func: { fn: 'SUM', col: 'products.amount' } }, 'amount'],\n        [{ $func: { fn: 'SUM', col: 'products.sum' } }, 'sum'],\n      ],\n      group: [{ $col: 'products->product.uuid' }],\n      order: [{ $col: 'products->product.title' }],\n      where: { clientUuid },\n      limit: -1,\n      raw: true,\n    });\n\n    this.content.clientSalesData.value = data;\n\n    const { response: [totals] } = await this.app.Order.query({\n      noOptions: true,\n      attributes: [\n        [{ $func: { fn: 'COUNT', col: 'uuid' } }, 'amount'],\n        [{ $func: { fn: 'SUM', col: 'total' } }, 'sum'],\n      ],\n      where: { clientUuid },\n    });\n    this.content.clientSalesOrders.title = `${this.app.t('Sales count')}: ${totals.amount}`;\n    this.content.clientSalesOrdersSum.title = `${this.app.t('Sales sum')}: ${totals.sum}`;\n    this.content.clientSalesOrdersAverage.title = `${this.app.t('Sales average sum')}: ${totals.amount > 0 ? (totals.sum / totals.amount).toFixed(2) : 0}`;\n  }\n  showModal = async () => {\n    this.content.clientSalesModal.open = true;\n    this.exec();\n  }\n}\n","import { Elements } from 'katejs/lib/client';\nimport ClientDebt from './ClientDebt';\nimport ClientSales from './ClientSales';\n\nconst MAX_REPORT_HEIGHT = 500;\n\nexport const reportStyle = {\n  maxHeight: MAX_REPORT_HEIGHT,\n  overflowY: 'scroll',\n};\n\nexport default ItemForm => class ClientItem extends ItemForm {\n  constructor(args) {\n    super(args);\n\n    this.clientDebt = new ClientDebt({\n      app: this.app,\n      content: this.content,\n      clientUuid: args.params.id,\n      report: true,\n    });\n\n    this.clientSales = new ClientSales({\n      app: this.app,\n      content: this.content,\n      clientUuid: args.params.id,\n      report: true,\n    });\n\n    this.elements.push({\n      type: Elements.GRID,\n      elements: [\n        {\n          type: Elements.GROUP,\n          cols: 6,\n          elements: this.clientDebt.elements,\n          div: true,\n          style: reportStyle,\n        },\n        {\n          type: Elements.GROUP,\n          cols: 6,\n          elements: this.clientSales.elements,\n          div: true,\n          style: reportStyle,\n        },\n      ],\n    });\n    this.actions.push({\n      type: Elements.BUTTON,\n      title: 'Invoice',\n      onClick: () => this.invoice(),\n    });\n  }\n  close() {\n    window.history.back();\n  }\n  async invoice() {\n    await this.save();\n    this.app.vars.currentClient = {\n      uuid: this.uuid,\n      title: this.content.title.value,\n    };\n    this.app.open('InvoiceItem', {});\n  }\n};\n","import moment from 'moment';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const wholeDay = date => ({\n  $gte: moment(date).startOf('day').format(),\n  $lte: moment(date).endOf('day').format(),\n});\n","import { Elements, Form } from 'katejs/lib/client';\nimport moment from 'moment';\nimport { wholeDay } from '../utils';\n\nexport default class Dashboard extends Form {\n  static title = 'Dashboard';\n  constructor(args) {\n    super(args);\n    this.date = new Date();\n    this.elements = [\n      {\n        type: Elements.GRID,\n        elements: [\n          {\n            type: Elements.CARD,\n            cols: 6,\n            elements: [\n              {\n                type: Elements.GROUP,\n                div: true,\n                style: { display: 'flex' },\n                elements: [\n                  {\n                    type: Elements.LABEL,\n                    id: 'title',\n                    title: moment(this.date).format('DD.MM.YYYY'),\n                    tag: 'h3',\n                    style: { marginRight: 50 },\n                  },\n                  {\n                    type: Elements.BUTTON,\n                    title: 'Prev',\n                    onClick: this.prev,\n                  },\n                  {\n                    type: Elements.BUTTON,\n                    title: 'Next',\n                    onClick: this.next,\n                  },\n                ],\n              },\n              {\n                id: 'ordersTotalsLabel',\n                type: Elements.LABEL,\n                title: '',\n                tag: 'h5',\n              },\n              {\n                id: 'productSalesData',\n                type: Elements.TABLE,\n                columns: [\n                  {\n                    title: 'Product',\n                    dataPath: 'products.product.title',\n                  },\n                  {\n                    title: 'Amount',\n                    dataPath: 'amount',\n                  },\n                  {\n                    title: 'Sum',\n                    dataPath: 'sum',\n                  },\n                ],\n                value: [],\n              },\n            ],\n          },\n        ],\n      },\n    ];\n    this.load();\n  }\n  async load() {\n    this.content.title.title = moment(this.date).format('DD.MM.YYYY');\n    this.loadOrdersCount();\n    this.loadProductSales();\n  }\n  async loadOrdersCount() {\n    const { response: [totals] } = await this.app.Order.query({\n      noOptions: true,\n      attributes: [\n        [{ $func: { fn: 'COUNT', col: 'uuid' } }, 'amount'],\n        [{ $func: { fn: 'SUM', col: 'total' } }, 'sum'],\n      ],\n      where: { date: wholeDay(this.date) },\n    });\n    this.content.ordersTotalsLabel.title = `${this.app.t('Orders count')}: ${totals.amount} (${totals.sum || 0})`;\n  }\n  async loadProductSales() {\n    const { response: data } = await this.app.Order.query({\n      attributes: [\n        [{ $func: { fn: 'SUM', col: 'products.amount' } }, 'amount'],\n        [{ $func: { fn: 'SUM', col: 'products.sum' } }, 'sum'],\n      ],\n      group: [{ $col: 'products->product.uuid' }],\n      order: [{ $col: 'products->product.title' }],\n      where: { date: wholeDay(this.date) },\n      limit: -1,\n      raw: true,\n    });\n    this.content.productSalesData.value = data;\n  }\n  next = () => {\n    this.date = moment(this.date).add(1, 'day');\n    this.load();\n  }\n  prev = () => {\n    this.date = moment(this.date).add(-1, 'day');\n    this.load();\n  }\n}\n","import { ItemForm } from 'katejs/lib/client';\nimport { structures } from '../structure';\n\nconst { Expense } = structures;\n\n\nclass ExpenseItem extends ItemForm({ Expense }, { addActions: true, addElements: true }) {\n  static doc = true;\n  constructor(params) {\n    super(params);\n    this.elements.get('cashbox').openOnFocus = true;\n  }\n}\n\nexport default ExpenseItem;\n","import { ProductsTable } from './OrderItem';\n\nexport default Itemform => class ReceiptItem extends Itemform {\n  static doc = true;\n  constructor(args) {\n    super(args);\n    this.ProductTable = new ProductsTable(this);\n  }\n};\n","import { Elements, Form } from 'katejs/lib/client';\nimport moment from 'moment';\n\nimport { joinRecord, cellStyle } from './CashFlow';\n\nexport default class ProductsFlowReport extends Form {\n  static title = 'Product flow';\n  static entity = 'Order';\n  constructor(args) {\n    super(args);\n    this.elements = [\n      {\n        type: Elements.GRID,\n        elements: [\n          {\n            id: 'startDate',\n            type: Elements.DATE,\n            title: 'Period start',\n            timeFormat: false,\n            value: moment().startOf('week'),\n          },\n          {\n            id: 'endDate',\n            type: Elements.DATE,\n            title: 'Period end',\n            timeFormat: false,\n            value: moment().endOf('week'),\n          },\n          {\n            id: 'details',\n            type: Elements.CHECKBOX,\n            title: 'Detail to document',\n          },\n        ]\n      },\n      {\n        id: 'formReport',\n        type: Elements.BUTTON,\n        title: 'Form report',\n        onClick: this.formReport,\n      },\n      {\n        id: 'data',\n        type: Elements.TABLE,\n        cellStyle,\n        columns: [\n          {\n            title: 'Product/Document',\n            dataPath: '',\n            format: val => (val.docTitle || (val.product && val.product.title)) || 'None',\n          },\n          {\n            title: 'Start',\n            dataPath: 'start',\n          },\n          {\n            title: 'Increase',\n            dataPath: 'increase',\n          },\n          {\n            title: 'Decrease',\n            dataPath: 'decrease',\n          },\n          {\n            title: 'Total',\n            dataPath: 'total',\n          },\n        ],\n      },\n    ];\n  }\n  formReport = async () => {\n    const { startDate, endDate } = this.getValues();\n    this.content.data.value = [];\n\n    const [{ response: balance }, { response: turnover }] = await Promise.all([\n      this.app.ProductRecord.balance({\n        date: moment(startDate).startOf('day'),\n      }),\n      this.app.ProductRecord.turnover({\n        where: {\n          date: {\n            $gt: moment(startDate).startOf('day'),\n            $lte: moment(endDate).endOf('day'),\n          },\n        },\n      }),\n    ]);\n    const response = joinRecord({ balance, turnover, fields: ['product'], resources: ['amount'], noDetails: !this.content.details.value });\n    this.content.data.value = response;\n  }\n}\n","import { Elements, Form } from 'katejs/lib/client';\nimport moment from 'moment';\n\nimport { joinRecord, cellStyle } from './CashFlow';\n\nexport default class DebtsFlowReport extends Form {\n  static title = 'Client debts';\n  static entity = 'Order';\n  constructor(args) {\n    super(args);\n    this.elements = [\n      {\n        type: Elements.GRID,\n        elements: [\n          {\n            id: 'startDate',\n            type: Elements.DATE,\n            title: 'Period start',\n            timeFormat: false,\n            value: moment().startOf('week'),\n          },\n          {\n            id: 'endDate',\n            type: Elements.DATE,\n            title: 'Period end',\n            timeFormat: false,\n            value: moment().endOf('week'),\n          },\n          {\n            id: 'details',\n            type: Elements.CHECKBOX,\n            title: 'Detail to document',\n          },\n        ]\n      },\n      {\n        id: 'formReport',\n        type: Elements.BUTTON,\n        title: 'Form report',\n        onClick: this.formReport,\n      },\n      {\n        id: 'data',\n        type: Elements.TABLE,\n        cellStyle,\n        columns: [\n          {\n            title: 'Client/Document',\n            dataPath: '',\n            format: val => (val.docTitle || (val.client && val.client.title)) || 'None',\n          },\n          {\n            title: 'Start',\n            dataPath: 'start',\n          },\n          {\n            title: 'Increase',\n            dataPath: 'increase',\n          },\n          {\n            title: 'Decrease',\n            dataPath: 'decrease',\n          },\n          {\n            title: 'Total',\n            dataPath: 'total',\n          },\n        ],\n      },\n    ];\n  }\n  formReport = async () => {\n    const { startDate, endDate } = this.getValues();\n    this.content.data.value = [];\n\n    const [{ response: balance }, { response: turnover }] = await Promise.all([\n      this.app.DebtRecord.balance({\n        date: moment(startDate).startOf('day'),\n      }),\n      this.app.DebtRecord.turnover({\n        where: {\n          date: {\n            $gt: moment(startDate).startOf('day'),\n            $lte: moment(endDate).endOf('day'),\n          },\n        },\n      }),\n    ]);\n    const response = joinRecord({ balance, turnover, fields: ['client'], resources: ['sum'], noDetails: !this.content.details.value });\n    this.content.data.value = response;\n  }\n}\n","import { Elements } from 'katejs/lib/client';\n\nexport default class ProductCard {\n  constructor(args) {\n    Object.assign(this, args);\n    this.elements = [\n      {\n        id: 'pcTitle',\n        title: 'Product card',\n        type: Elements.LABEL,\n        tag: 'h3',\n      },\n      {\n        id: 'pcRest',\n        type: Elements.LABEL,\n        title: 'Rest: ',\n        tag: 'h5',\n      },\n      {\n        id: 'pcTable',\n        type: Elements.TABLE,\n        columns: [\n          { title: 'Document', dataPath: 'document' },\n          { title: 'Increase', dataPath: 'increase' },\n          { title: 'Decrease', dataPath: 'decrease' },\n        ],\n        rowClick: this.rowClick,\n      },\n    ];\n    if (this.productUuid) {\n      this.query();\n    }\n  }\n  async query() {\n    const { response: data } = await this.app.ProductRecord.turnover({\n      where: { productUuid: this.productUuid },\n    });\n    const rest = data.reduce((acc, val) => acc + val.amount, 0);\n    this.content.pcRest.title = this.app.t`Rest: ${rest}`;\n\n    this.content.pcTable.value = data.map(item => ({\n      document: item.docTitle,\n      increase: item.amount > 0 ? item.amount : '',\n      decrease: item.amount < 0 ? 0 - item.amount : '',\n      docUuid: item.docUuid,\n      entity: item.entity,\n    }));\n  }\n  rowClick = (row) => {\n    this.app.open(`${row.entity}Item`, { id: row.docUuid });\n  }\n}\n","import moment from 'moment';\r\nimport { Elements } from 'katejs/lib/client';\r\n\r\nconst TEXT_MARGIN = 6;\r\n\r\nconst dateStyle = {\r\n  display: 'inline',\r\n  marginRight: TEXT_MARGIN,\r\n  fontSize: 10,\r\n};\r\n\r\nconst userStyle = {\r\n  display: 'inline',\r\n  marginRight: TEXT_MARGIN,\r\n  fontSize: 10,\r\n  fontWeight: 'bold',\r\n};\r\n\r\nconst commentStyle = {\r\n  display: 'inline',\r\n  marginRight: TEXT_MARGIN,\r\n};\r\n\r\nconst taskStyle = {\r\n  display: 'inline',\r\n  marginRight: TEXT_MARGIN,\r\n  cursor: 'pointer',\r\n  textDecoration: 'underline',\r\n};\r\n\r\nconst taskDoneStyle = {\r\n  display: 'inline',\r\n  marginRight: TEXT_MARGIN,\r\n  cursor: 'pointer',\r\n  textDecoration: 'line-through',\r\n};\r\n\r\nconst mapDate = (obj) => ({\r\n  ...obj,\r\n  date: obj.date? new Date(obj.date) : 0,\r\n});\r\n\r\nconst mapHistory = (events) => (data) => {\r\n  const element = {\r\n    type: Elements.GROUP,\r\n    div: true,\r\n    elements: [\r\n      {\r\n        type: Elements.LABEL,\r\n        style: dateStyle,\r\n        title: data.date ? moment(data.date).format('DD.MM.YYYY HH:mm') : '---',\r\n      },\r\n    ],\r\n  };\r\n  // comment\r\n  if (data.comment) {\r\n    element.elements.push({\r\n      type: Elements.LABEL,\r\n      style: userStyle,\r\n      title: (data.user && data.user.title) || 'unknown',\r\n    });\r\n    element.elements.push({\r\n      type: Elements.LABEL,\r\n      style: commentStyle,\r\n      title: data.comment,\r\n    });\r\n  }\r\n  // task\r\n  if (data.done !== undefined) {\r\n    element.elements.push({\r\n      type: Elements.LABEL,\r\n      title: 'for',\r\n      style: commentStyle,\r\n    });\r\n    element.elements.push({\r\n      type: Elements.LABEL,\r\n      style: userStyle,\r\n      title: `${(data.user && data.user.title) || 'unknown'}:`,\r\n    });\r\n    element.elements.push({\r\n      type: Elements.LABEL,\r\n      style: data.done ? taskDoneStyle : taskStyle,\r\n      title: data.title,\r\n      onClick: () => events.openTask(data.uuid),\r\n    });\r\n  }\r\n  return element;\r\n};\r\n\r\nexport default Form => class DealItem extends Form {\r\n  constructor(args) {\r\n    super(args);\r\n\r\n    if (!userStyle.color) {\r\n      userStyle.color = this.app.constructor.primaryColor;\r\n    }\r\n\r\n    const generatedElements = this.elements;\r\n    const title = generatedElements.cut('title');\r\n    const salesman = generatedElements.cut('user');\r\n    const schema = generatedElements.cut('schema');\r\n    const step = generatedElements.cut('stepIndex');\r\n    const dealClosed = generatedElements.cut('dealClosed');\r\n    generatedElements.cut('contact'); // temp remove contact\r\n    this.elements = [\r\n      {\r\n        id: 'mainGrid',\r\n        type: Elements.GRID,\r\n        elements: [\r\n          {\r\n            cols: 6,\r\n            id: 'leftGroup',\r\n            type: Elements.GROUP,\r\n            elements: [\r\n              {\r\n                type: Elements.GRID,\r\n                elements: [\r\n                  { ...title, cols: 6 },\r\n                  {\r\n                    type: Elements.LABEL,\r\n                    title: 'by',\r\n                    cols: 1   ,\r\n                    style: { marginTop: 30 },\r\n                  },\r\n                  { ...salesman, cols: 5 },\r\n                ],\r\n              },\r\n              ...generatedElements,\r\n              {\r\n                type: Elements.GRID,\r\n                elements: [\r\n                  {\r\n                    ...step,\r\n                    cols: 6,\r\n                    type: Elements.SELECT,\r\n                    selectValue: true,\r\n                  },\r\n                  {\r\n                    type: Elements.LABEL,\r\n                    title: 'at',\r\n                    cols: 1   ,\r\n                    style: { marginTop: 30 },\r\n                  },\r\n                  { ...schema, cols: 5 },\r\n                ],\r\n              },\r\n              dealClosed,\r\n              {\r\n                type: Elements.CARD,\r\n                id: 'extraFields',\r\n                elements: [],\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            cols: 6,\r\n            id: 'rightGroup',\r\n            type: Elements.GROUP,\r\n            elements: [\r\n              {\r\n                type: Elements.BUTTON,\r\n                title: 'Add Task',\r\n                onClick: () => this.addTask(),\r\n              },\r\n              {\r\n                id: 'historyCard',\r\n                type: Elements.CARD,\r\n                elements: [\r\n                  {\r\n                    type: Elements.GROUP,\r\n                    id: 'history',\r\n                    elements: [],\r\n                  },\r\n                  {\r\n                    type: Elements.GRID,\r\n                    elements: [\r\n                      {\r\n                        id: 'commentText',\r\n                        title: 'Comment',\r\n                        type: Elements.INPUT,\r\n                        cols: 8,\r\n                        onKeyPress: (args) => this.keyPress(args),\r\n                      },\r\n                      {\r\n                        type: Elements.BUTTON,\r\n                        title: 'Do Comment',\r\n                        onClick: () => this.postComment(),\r\n                        cols: 4,\r\n                      },\r\n                    ],\r\n                  },\r\n                ],\r\n              },\r\n            ],\r\n          },\r\n        ],\r\n      }\r\n    ];\r\n\r\n    this.elements.get('client').onChange = (value) => this.clientChange(value);\r\n\r\n    this.actions.push({\r\n      type: Elements.BUTTON,\r\n      title: 'To Client',\r\n      onClick: () => this.toClient(),\r\n    });\r\n  }\r\n  async postComment() {\r\n    const comment = this.content.commentText.value;\r\n    this.content.commentText.value = '';\r\n    await this.app.DealComment.put({ body: { comment, dealUuid: this.uuid } });\r\n    this.fillHistory();\r\n  }\r\n  async afterInit() {\r\n    super.afterInit();\r\n    if (!this.uuid) {\r\n      this.content.user.value = this.app.user;\r\n      this.content.schema.value = this.app.vars.schema;\r\n      this.fillSteps();\r\n      this.save();\r\n    }\r\n    this.fillHistory();\r\n  }\r\n  async fillHistory() {\r\n    if (!this.uuid) {\r\n      return;\r\n    }\r\n    const [\r\n      { response: comments },\r\n      { response: tasks },\r\n    ] = await Promise.all([\r\n      this.app.DealComment.query({\r\n        where: {\r\n          dealUuid: this.uuid,\r\n        },\r\n      }),\r\n      this.app.Task.query({\r\n        where: {\r\n          dealUuid: this.uuid,\r\n        },\r\n      }),\r\n    ]);\r\n\r\n\r\n    const history = [\r\n      ...comments.map(mapDate),\r\n      ...tasks.map(mapDate),\r\n    ];\r\n    history.sort((a, b) => b.date - a.date);\r\n    this.content.history.elements = history.map(mapHistory({\r\n      openTask: (uuid) => this.openTask(uuid),\r\n    }));\r\n  }\r\n  addTask() {\r\n    this.app.vars.currentDeal = {\r\n      uuid: this.uuid,\r\n      title: this.content.title.value,\r\n    };\r\n    this.app.vars.currentClient = this.content.client.value;\r\n    this.app.open(`TaskItem`, { id: 'new' });\r\n  }\r\n  openTask(uuid) {\r\n    this.app.open('TaskItem', { id: uuid });\r\n  }\r\n  clientChange(value) {\r\n    if (!this.content.title.value && value && value.uuid) {\r\n      this.content.title.value = value.title;\r\n    }\r\n  }\r\n  async load() {\r\n    await super.load();\r\n    this.fillSteps();\r\n  }\r\n  fillSteps() {\r\n    const schema = this.content.schema.value;\r\n    if (!schema || !schema.uuid) return;\r\n    const steps = this.app.schemas[schema.uuid].steps;\r\n    this.content.stepIndex.options = steps.map((step, index) => ({ title: step.name, value: index }));\r\n    const stepIndex = this.content.stepIndex.value;\r\n    if (stepIndex === undefined || stepIndex === null) {\r\n      this.content.stepIndex.value = 0;\r\n    }\r\n  }\r\n  keyPress(event) {\r\n    if (event.key === \"Enter\") {\r\n      this.postComment();\r\n    }\r\n  }\r\n  toClient() {\r\n    const client = this.content.client.value;\r\n    if (client && client.uuid) {\r\n      this.save();\r\n      this.app.open('ClientItem', { id: client.uuid });\r\n    }\r\n  }\r\n}\r\n","import { Elements } from 'katejs/lib/client';\r\nimport moment from 'moment';\r\n\r\nexport default Form => class TaskItem extends Form {\r\n  constructor(args) {\r\n    super(args);\r\n\r\n    const topRow = {\r\n      type: Elements.GRID,\r\n      elements: [\r\n        {\r\n          ...this.elements.cut('title'),\r\n          cols: 7,\r\n        },\r\n        {\r\n          ...this.elements.cut('date'),\r\n          title: 'On date',\r\n          cols: 3,\r\n        },\r\n        {\r\n          ...this.elements.cut('done'),\r\n          cols: 2,\r\n        },\r\n      ],\r\n    };\r\n    this.elements.unshift(topRow);\r\n    this.actions.find(item => item.id === '__Close').onClick = () => this.close();\r\n    this.actions.find(item => item.id === '__OK').onClick = () => this.ok();\r\n\r\n    this.elements.cut('contact'); // temp remove contact\r\n  }\r\n  afterInit() {\r\n    if (super.afterInit) {\r\n      super.afterInit();\r\n    }\r\n    if (!this.uuid) {\r\n      this.content.deal.value = this.app.vars.currentDeal;\r\n      this.content.user.value = this.app.user;\r\n      this.content.date.value = moment();\r\n      this.content.client.value = this.app.vars.currentClient;\r\n    }\r\n  }\r\n  close() {\r\n    window.history.back();\r\n  }\r\n  async ok() {\r\n    await this.save();\r\n    this.close();\r\n  }\r\n}\r\n","import { Elements, getElement } from 'katejs/lib/client';\r\nimport { structures } from '../structure';\r\n\r\nexport const kanbanStyles = {\r\n  container: {\r\n    justifyContent: 'none',\r\n    overflowX: 'scroll',\r\n  },\r\n  columnContainer: {},\r\n  columnHeader: { fontSize: '1.25rem' },\r\n  column: {},\r\n  columnDragOver: { background: '#b1dede' },\r\n  item: { background: '#088596' },\r\n  itemDragging: { background: '#064C59'},\r\n};\r\n\r\nconst BOARD_COL_PREFIX = '$$col_';\r\n\r\nexport default Form => class DealList extends  Form {\r\n  constructor(args) {\r\n    super(args);\r\n    this.actions = undefined;\r\n    const schema = this.app.vars.schema || this.app.settings.defaultSchema;\r\n    this.app.vars.schema = schema;\r\n    const schemaFilter = {\r\n      ...getElement(structures.Deal.fields.find(item => item.name === 'schema'), this),\r\n      value: schema,\r\n      onChange: () => this.schemaChange(),\r\n    };\r\n    const isBoard = this.app.vars.isBoardDeals === undefined ? true : this.app.vars.isBoardDeals;\r\n    const isHideClosed = this.app.vars.isHideClosedDeals === undefined ? true : this.app.vars.isHideClosedDeals;\r\n    const topPanel = {\r\n      type: Elements.GRID,\r\n      elements: [\r\n        {\r\n          type: Elements.BUTTON,\r\n          title: 'New Deal',\r\n          onClick: () => this.app.open('DealItem', { id: 'new' }),\r\n          cols: 2,\r\n        },\r\n        schemaFilter,\r\n        {\r\n          ...getElement(structures.Deal.fields.find(item => item.name === 'user'), this),\r\n          value: this.app.user,\r\n          onChange: () => this.userChange(),\r\n          disabled: !this.app.allow('SaleSchema', 'put'),\r\n        },\r\n        {\r\n          type: Elements.LABEL,\r\n          title: 'List',\r\n          style: {\r\n            textAlign: 'right',\r\n            fontWeight: 'bolder',\r\n            marginTop: 22,\r\n          },\r\n          tag: 'p',\r\n          cols: 1,\r\n        },\r\n        {\r\n          type: Elements.GROUP,\r\n          div: true,\r\n          style: {\r\n            marginTop: 10,\r\n          },\r\n          cols: 1,\r\n          elements: [\r\n            {\r\n              type: Elements.SWITCH,\r\n              id: 'isBoard',\r\n              value: isBoard,\r\n              title: 'Board',\r\n              onChange: () => this.changeView(),\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          type: Elements.CHECKBOX,\r\n          id: 'isHideClosed',\r\n          value: isHideClosed,\r\n          cols: 2,\r\n          title: 'Hide Closed',\r\n          onChange: () => this.hideClosedChange(),\r\n          style: {\r\n            marginLeft: 25,\r\n          },\r\n        },\r\n      ],\r\n    };\r\n\r\n    const list = this.elements.cut('list');\r\n    list.columns.splice(list.columns.findIndex(col => col.dataPath === \"contact\"), 1);\r\n    const stepIndex = list.columns.find(col => col.dataPath === \"stepIndex\");\r\n    stepIndex.format = (index) => this.stepFormat(index);\r\n    stepIndex.title = 'Step';\r\n    const dealClosed = list.columns.find(col => col.dataPath === \"dealClosed\");\r\n    dealClosed.title = 'Closed';\r\n    dealClosed.format = (val) => val ? '✔' : '';\r\n    list.hidden = isBoard;\r\n    const board = {\r\n      hidden: !isBoard,\r\n      id: 'board',\r\n      type: 'Kanban',\r\n      styles: kanbanStyles,\r\n      itemClick: (item) => this.boardItemClick(item),\r\n      data: [],\r\n      onDragEnd: (params) => this.onDragEnd(params),\r\n      orderSaveKey: 'dealsOrder',\r\n    };\r\n    this.elements.push(topPanel, list, board);\r\n    const userColIndex = list.columns.findIndex(col => col.dataPath === 'user');\r\n    this.userColumn = list.columns.splice(userColIndex, 1)[0];\r\n    const closedColIndex = list.columns.findIndex(col => col.dataPath === 'dealClosed');\r\n    this.closedColumn =  list.columns.splice(closedColIndex, 1)[0];\r\n    this.setFilters(true);\r\n  }\r\n  schemaChange() {\r\n    this.app.vars.schema = this.content.schema.value;\r\n    this.setFilters();\r\n    this.load();\r\n  }\r\n  userChange() {\r\n    this.setFilters();\r\n    const columns = this.content.list.columns;\r\n    const userColIndex = columns.findIndex(item => item.dataPath === 'user');\r\n    if (!this.content.user.value) {\r\n      if (userColIndex === -1) {\r\n        columns.push(this.userColumn);\r\n      }\r\n    } else {\r\n      if (userColIndex !== -1) {\r\n        columns.splice(userColIndex, 1);\r\n      }\r\n    }\r\n    this.content.list.columns = columns;\r\n    this.load();\r\n  }\r\n  setFilters(init) {\r\n    this.filters = {\r\n      schemaUuid: this.app.vars.schema && this.app.vars.schema.uuid,\r\n    };\r\n    let user = this.app.user;\r\n    let hideClosed = this.app.vars.isHideClosedDeals !== undefined ? this.app.vars.isHideClosedDeals : true;\r\n    if (!init) {\r\n      user = this.content.user.value;\r\n      hideClosed = this.content.isHideClosed.value;\r\n    }\r\n    if (user) {\r\n      this.filters.userUuid = user.uuid;\r\n    }\r\n    if (hideClosed) {\r\n      this.filters.dealClosed = false;\r\n    }\r\n  }\r\n  changeView() {\r\n    const isBoard = this.content.isBoard.value;\r\n    this.content.list.hidden = isBoard;\r\n    this.content.board.hidden = !isBoard;\r\n    this.app.vars.isBoardDeals = isBoard;\r\n    if (isBoard) {\r\n      this.setBoardData(this.content.list.value);\r\n    }\r\n  }\r\n  boardItemClick(item) {\r\n    this.app.open('DealItem', { id: item.uuid });\r\n  }\r\n  async load() {\r\n    const data = await super.load();\r\n    const { response: schema } = await this.app.SaleSchema.get({ uuid: this.app.vars.schema.uuid });\r\n    this.schema = schema;\r\n    this.content.list.value = data;\r\n    if (this.content.isBoard.value) {\r\n      this.setBoardData(data);\r\n    }\r\n    return data;\r\n  }\r\n  async setBoardData(data) {\r\n    data = data.map(item => ({ ...item, id: item.uuid }));\r\n    // идентификаторы сделаны индексами чтобы при изменении схемы\r\n    // сохранялся порядок\r\n    const columns = this.schema.steps.map((step, index) => ({ ...step, title: step.name, id: `${BOARD_COL_PREFIX}${index}` }));\r\n    data.forEach(deal => {\r\n      let column = columns.find((column, index) => index === deal.stepIndex);\r\n      if (!column) {\r\n        column = columns[0];\r\n      }\r\n      const items = column.items || [];\r\n      items.push(deal);\r\n      column.items = items;\r\n    });\r\n    this.content.board.data = columns;\r\n  }\r\n  async onDragEnd(params) {\r\n    const data = this.content.board.data;\r\n    if (params.destination.droppableId !== params.source.droppableId) {\r\n      // change step\r\n      const targetStepIndex = +params.destination.droppableId.replace(BOARD_COL_PREFIX, '');\r\n      await this.app.Deal.put({ uuid: params.draggableId, body: { stepIndex: targetStepIndex }});\r\n      this.load();\r\n    }\r\n  }\r\n  stepFormat(index) {\r\n    return this.schema && this.schema.steps[index].name;\r\n  }\r\n  hideClosedChange() {\r\n    this.setFilters();\r\n    this.app.vars.isHideClosedDeals = this.content.isHideClosed.value;\r\n    const columns = this.content.list.columns;\r\n    const closedColIndex = columns.findIndex(item => item.dataPath === 'dealClosed');\r\n    if (!this.content.isHideClosed.value) {\r\n      if (closedColIndex === -1) {\r\n        columns.push(this.closedColumn);\r\n      }\r\n    } else {\r\n      if (closedColIndex !== -1) {\r\n        columns.splice(closedColIndex, 1);\r\n      }\r\n    }\r\n    this.content.list.columns = columns;\r\n    this.load();\r\n  }\r\n}\r\n","\r\nexport default Form => class SaleSchemaItem extends Form {\r\n  async save() {\r\n    await super.save();\r\n    this.app.fetchSchemas();\r\n  }\r\n}\r\n","import { Elements, getElement } from 'katejs/lib/client';\r\nimport moment from 'moment';\r\nimport { structures } from '../structure';\r\nimport { kanbanStyles } from './DealList';\r\n\r\nconst doneStyle = {\r\n  textDecoration: 'line-through',\r\n};\r\n\r\nexport default Form => class TaskList extends Form {\r\n  constructor(args) {\r\n    super(args);\r\n    this.actions = undefined;\r\n    const isBoard = this.app.vars.isBoardTasks === undefined ? true : this.app.vars.isBoardTasks;\r\n    const isHideDone = this.app.vars.isHideDoneTasks === undefined ? true : this.app.vars.isHideDoneTasks;\r\n    const topPanel = {\r\n      type: Elements.GRID,\r\n      elements: [\r\n        {\r\n          type: Elements.BUTTON,\r\n          title: 'New Task',\r\n          onClick: () => this.app.open('TaskItem', { id: 'new' }),\r\n          cols: 2,\r\n        },\r\n        {\r\n          ...getElement(structures.Task.fields.find(item => item.name === 'user'), this),\r\n          value: this.app.user,\r\n          onChange: () => this.userChange(),\r\n        },\r\n        {\r\n          type: Elements.LABEL,\r\n          title: 'List',\r\n          style: {\r\n            textAlign: 'right',\r\n            fontWeight: 'bolder',\r\n            marginTop: 12,\r\n          },\r\n          tag: 'p',\r\n          cols: 2,\r\n        },\r\n        {\r\n          type: Elements.SWITCH,\r\n          id: 'isBoard',\r\n          value: isBoard,\r\n          title: 'Board',\r\n          cols: 2,\r\n          onChange: () => this.changeView(),\r\n        },\r\n        {\r\n          type: Elements.CHECKBOX,\r\n          id: 'isHideDone',\r\n          value: isHideDone,\r\n          cols: 2,\r\n          title: 'Hide Done',\r\n          onChange: () => this.hideDoneChange(),\r\n        },\r\n      ],\r\n    };\r\n\r\n    const list = this.elements.cut('list');\r\n    list.hidden = isBoard;\r\n    list.columns.splice(list.columns.findIndex(col => col.dataPath === 'done'), 1);\r\n    list.columns.splice(list.columns.findIndex(col => col.dataPath === 'contact'), 1);\r\n    const dataColumn = list.columns.find(col => col.dataPath === 'date');\r\n    dataColumn.format = (val) => moment(val).format('DD.MM HH:mm');\r\n    list.cellStyle = (row, column) => {\r\n      if (column.dataPath === 'title' && row.done) {\r\n        return {\r\n          textDecoration: 'line-through',\r\n        };\r\n      }\r\n    };\r\n\r\n    const board = {\r\n      hidden: !isBoard,\r\n      id: 'board',\r\n      type: 'Kanban',\r\n      styles: kanbanStyles,\r\n      itemClick: (item) => this.boardItemClick(item),\r\n      data: [],\r\n      onDragEnd: (params) => this.onDragEnd(params),\r\n      orderSaveKey: 'tasksOrder',\r\n    };\r\n    this.elements.push(topPanel, list, board);\r\n\r\n    this.setFilters(true);\r\n    const userColIndex = list.columns.findIndex(col => col.dataPath === 'user');\r\n    this.userColumn = list.columns.splice(userColIndex, 1)[0];\r\n    this.app.vars.currentClient = undefined;\r\n    this.app.vars.currentDeal = undefined;\r\n  }\r\n  userChange() {\r\n    this.setFilters();\r\n    const columns = this.content.list.columns;\r\n    const userColIndex = columns.findIndex(item => item.dataPath === 'user');\r\n    if (!this.content.user.value) {\r\n      if (userColIndex === -1) {\r\n        columns.push(this.userColumn);\r\n      }\r\n    } else {\r\n      if (userColIndex !== -1) {\r\n        columns.splice(userColIndex, 1);\r\n      }\r\n    }\r\n    this.content.list.columns = columns;\r\n    this.load();\r\n  }\r\n  setFilters(init) {\r\n    this.filters = {\r\n    };\r\n    let user = this.app.user;\r\n    let hideDone = this.app.vars.isHideDoneTasks === undefined ? true : this.app.vars.isHideDoneTasks;\r\n    if (!init) {\r\n      user = this.content.user.value;\r\n      hideDone = this.content.isHideDone.value;\r\n    }\r\n    if (user) {\r\n      this.filters.userUuid = user.uuid;\r\n    }\r\n    if (hideDone) {\r\n      this.filters.done = false;\r\n    }\r\n  }\r\n\r\n  changeView() {\r\n    const isBoard = this.content.isBoard.value;\r\n    this.content.list.hidden = isBoard;\r\n    this.content.board.hidden = !isBoard;\r\n    this.app.vars.isBoardTasks = isBoard;\r\n    if (isBoard) {\r\n      this.setBoardData(this.content.list.value);\r\n    }\r\n  }\r\n  boardItemClick(item) {\r\n    this.app.open('TaskItem', { id: item.uuid });\r\n  }\r\n  async load() {\r\n    const data = await super.load();\r\n    if (this.content.isBoard.value) {\r\n      this.setBoardData(data);\r\n    }\r\n    return data;\r\n  }\r\n  async setBoardData(data) {\r\n    const columns = [\r\n      {\r\n        title: 'Expired',\r\n        id: 'expired',\r\n        items: [],\r\n        edge: moment().startOf('day').toDate().getTime(),\r\n      },\r\n      {\r\n        title: 'Today',\r\n        id: moment().format('YYYYMMDD'),\r\n        items: [],\r\n        edge: moment().endOf('day').toDate().getTime(),\r\n      },\r\n      {\r\n        title: 'Tomorrow',\r\n        id: moment().add(1, 'day').format('YYYYMMDD'),\r\n        items: [],\r\n        edge: moment().add(1, 'day').endOf('day').toDate().getTime(),\r\n      },\r\n      {\r\n        title: 'Day After Tomorrow',\r\n        id: moment().add(2, 'day').format('YYYYMMDD'),\r\n        items: [],\r\n        edge: moment().add(2, 'day').endOf('day').toDate().getTime(),\r\n      },\r\n      {\r\n        title: 'Later',\r\n        id: 'later',\r\n        items: [],\r\n      },\r\n    ];\r\n    data.forEach((task) => {\r\n      const timestamp = moment(task.date).toDate().getTime();\r\n      let colIndex = 0;\r\n      for(; colIndex < columns.length - 1; colIndex++) { // except last\r\n        if (timestamp < columns[colIndex].edge) {\r\n          break;\r\n        }\r\n      }\r\n      if (colIndex === colIndex.length) {\r\n        colIndex--;\r\n      }\r\n\r\n      columns[colIndex].items.push({\r\n        ...task,\r\n        id: task.uuid,\r\n        style: task.done ? doneStyle : undefined,\r\n      });\r\n    });\r\n    this.content.board.data = columns;\r\n  }\r\n  async onDragEnd(params) {\r\n    const data = this.content.board.data;\r\n    const task = this.content.list.value.find(item => item.uuid === params.draggableId);\r\n    if (params.destination.droppableId !== params.source.droppableId) {\r\n      const targetDate = params.destination.droppableId;\r\n      let date;\r\n      if (targetDate === 'expired') {\r\n        date = moment().subtract(1, 'day').toDate();\r\n      } else if (targetDate === 'later') {\r\n        date = moment().add(3, 'days').toDate();\r\n      } else {\r\n        date = moment(`${targetDate} ${moment(task.date).format('HH:mm')}`, 'YYYYMMDD HH:mm');\r\n      }\r\n      await this.app.Task.put({ uuid: params.draggableId, body: { date }});\r\n      this.load();\r\n    }\r\n  }\r\n  hideDoneChange() {\r\n    this.app.vars.isHideDoneTasks = this.content.isHideDone.value;\r\n\r\n    this.setFilters();\r\n    this.load();\r\n  }\r\n}\r\n","import { ProductsTable } from './OrderItem';\r\nimport { Elements } from 'katejs/lib/client';\r\nimport moment from 'moment';\r\n\r\nexport default Form => class InvoiceItem extends Form {\r\n  static doc = true;\r\n  constructor(args) {\r\n    super(args);\r\n    this.productTable = new ProductsTable(this);\r\n    this.actions.push({\r\n      type: Elements.BUTTON,\r\n      title: 'Print',\r\n      onClick: () => this.print(),\r\n    });\r\n    if (this.app.allow('Order', 'put')) {\r\n      this.actions.push({\r\n        type: Elements.BUTTON,\r\n        title: 'Order',\r\n        onClick: () => this.order(),\r\n      });\r\n    }\r\n  }\r\n  afterInit() {\r\n    if (super.afterInit) {\r\n      super.afterInit();\r\n    }\r\n    if (!this.uuid) {\r\n      this.content.client.value = this.app.vars.currentClient;\r\n      this.app.vars.currentClient = undefined;\r\n    }\r\n  }\r\n  async print() {\r\n    await this.save();\r\n    const { response: doc } = await this.app.Invoice.get({ uuid: this.uuid });\r\n    const data = {\r\n      ...doc,\r\n      date: moment(doc.date).format('DD.MM.YYYY'),\r\n      ...this.app.settings,\r\n      products: doc.products.map(item => ({\r\n        ...item,\r\n        price: item.price.toFixed(2),\r\n        sum: item.sum.toFixed(2),\r\n      })),\r\n      total: doc.total.toFixed(2),\r\n    };\r\n    this.app.print({ template: 'Invoice', data });\r\n  }\r\n  close() {\r\n    window.history.back();\r\n  }\r\n  async order() {\r\n    await this.save();\r\n    this.app.vars.currentInvoiceData = this.getValues();\r\n    this.app.open('OrderItem', {});\r\n  }\r\n}\r\n\r\n//   <!doctype html>\r\n// <html lang=\"en\">\r\n//   <head>\r\n//   <!-- Required meta tags -->\r\n// <meta charset=\"utf-8\">\r\n//   <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\">\r\n//\r\n//   <!-- Bootstrap CSS -->\r\n// <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" crossorigin=\"anonymous\">\r\n//\r\n//   <title>Счет</title>\r\n//   <style>\r\n//   html, body {\r\n//   width: 210mm;\r\n//   height: 297mm;\r\n// }\r\n// </style>\r\n// </head>\r\n// <body>\r\n//\r\n// <table width=\"100%\" style=\"font-family: Arial;\">\r\n//   <tr style=\"display: none;\">\r\n//   <td style=\"width: 68%; padding: 20px 0;\">\r\n//   <div style=\"text-align: justify; font-size: 11pt;\">Внимание! Оплата данного счета означает согласие с условиями поставки товара. Счет действителен в течение 5(пяти) банковских дней, не считая дня выписки счета. Уведомление об оплате  обязательно, в противном случае НЕ ГАРАНТИРУЕТСЯ наличие товара на складе. Товар отпускается по факту прихода денег на р/с Поставщика, самовывозом, при наличии доверенности и паспорта.</div>\r\n// </td>\r\n// <td style=\"width: 32%; text-align: center; padding: 30px 0;\"><img src=\"<!--Лого url-->\" style=\"width: 70%;\"></td>\r\n//   </tr>\r\n//\r\n//   </table>\r\n//\r\n//\r\n//   <table width=\"100%\" border=\"2\" style=\"border-collapse: collapse; width: 100%; font-family: Arial;\" cellpadding=\"2\" cellspacing=\"2\">\r\n//   <tr style=\"\">\r\n//   <td colspan=\"2\" rowspan=\"2\" style=\"min-height:13mm; width: 105mm;\">\r\n//   <table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" style=\"height: 13mm;\">\r\n//   <tr>\r\n//   <td valign=\"top\">\r\n//   <div>{{ companyBankName }}</div>\r\n// </td>\r\n// </tr>\r\n// <tr>\r\n// <td valign=\"bottom\" style=\"height: 3mm;\">\r\n//   <div style=\"font-size:10pt;\">Банк получателя</div>\r\n// </td>\r\n// </tr>\r\n// </table>\r\n// </td>\r\n// <td style=\"min-height:7mm;height:auto; width: 25mm;\">\r\n//   <div>БИK</div>\r\n//   </td>\r\n//   <td rowspan=\"2\" style=\"vertical-align: top; width: 60mm;\">\r\n//   <div style=\" height: 7mm; line-height: 7mm; vertical-align: middle;\">{{companyBankCode}}</div>\r\n// <div>{{companyBankCorrAccount}}</div>\r\n// </td>\r\n// </tr>\r\n// <tr>\r\n// <td style=\"width: 25mm;\">\r\n//   <div>Сч. №</div>\r\n// </td>\r\n// </tr>\r\n// <tr>\r\n// <td style=\"min-height:6mm; height:auto; width: 50mm;\">\r\n//   <div>ИНН {{companyInn}}</div>\r\n// </td>\r\n// <td style=\"min-height:6mm; height:auto; width: 55mm;\">\r\n//   <div>КПП {{companyKpp}}</div>\r\n// </td>\r\n// <td rowspan=\"2\" style=\"min-height:19mm; height:auto; vertical-align: top; width: 25mm;\">\r\n//   <div>Сч. №</div>\r\n// </td>\r\n// <td rowspan=\"2\" style=\"min-height:19mm; height:auto; vertical-align: top; width: 60mm;\">\r\n//   <div>{{companyBankAccount}}</div>\r\n// </td>\r\n// </tr>\r\n// <tr>\r\n// <td colspan=\"2\" style=\"min-height:13mm; height:auto;\">\r\n//\r\n//   <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" style=\"height: 13mm; width: 105mm;\">\r\n//   <tr>\r\n//   <td valign=\"top\">\r\n//   <div>{{companyName}}</div>\r\n// </td>\r\n// </tr>\r\n// <tr>\r\n// <td valign=\"bottom\" style=\"height: 3mm;\">\r\n//   <div style=\"font-size: 10pt;\">Получатель</div>\r\n//   </td>\r\n//   </tr>\r\n//   </table>\r\n//\r\n//   </td>\r\n//   </tr>\r\n//   </table>\r\n//   <br/>\r\n//\r\n//   <div style=\"font-weight: bold; font-size: 25pt; padding-left:5px; font-family: Arial;\">\r\n//   Счет № {{number}} от {{date}}</div>\r\n// <br/>\r\n//\r\n// <div style=\"background-color:#000000; width:100%; font-size:1px; height:2px;\">&nbsp;</div>\r\n//\r\n// <table width=\"100%\" style=\"font-family: Arial;\">\r\n//   <tr>\r\n//   <td style=\"width: 30mm; vertical-align: top;\">\r\n//   <div style=\" padding-left:2px; \">Поставщик:    </div>\r\n// </td>\r\n// <td>\r\n// <div style=\"font-weight:bold;  padding-left:2px;\">\r\n//   {{companyName}} ИНН  {{companyInn}}, КПП {{companyKpp}}<br>\r\n// <span style=\"font-weight: normal;\"><!--  address --></span>          </div>\r\n// </td>\r\n// </tr>\r\n// <tr>\r\n// <td style=\"width: 30mm; vertical-align: top;\">\r\n//   <div style=\" padding-left:2px;\">Покупатель:    </div>\r\n// </td>\r\n// <td>\r\n// <div style=\"font-weight:bold;  padding-left:2px;\">\r\n//   {{client.title}}<br><span style=\"font-weight: normal;\"><!-- address--></span>            </div>\r\n// </td>\r\n// </tr>\r\n// </table>\r\n//\r\n//\r\n// <table border=\"2\" width=\"100%\" cellpadding=\"2\" cellspacing=\"2\" style=\"border-collapse: collapse; width: 100%; font-family: Arial;\">\r\n//   <thead>\r\n//   <tr>\r\n//   <th style=\"width:13mm; \">№</th>\r\n//\r\n// <th>Товары (работы, услуги)</th>\r\n// <th style=\"width:20mm; \">Кол-во</th>\r\n//   <!--        <th style=\"width:17mm; \">Ед.</th> -->\r\n//   <th style=\"width:27mm;  \">Цена</th>\r\n//   <th style=\"width:27mm;  \">Сумма</th>\r\n//   </tr>\r\n//   </thead>\r\n//   <tbody >\r\n//   {{#each products}}\r\n// <tr>\r\n// <td style=\"width:13mm; \">{{ rowNumber }}</td>\r\n//\r\n// <td> {{ product.title }}</td>\r\n// <td style=\"width:20mm; text-align: right;\">{{ amount }}</td>\r\n// <!--        <td style=\"width:17mm; \">Шт.</td> -->\r\n//   <td style=\"width:27mm; text-align: right; \">{{ price }}</td>\r\n// <td style=\"width:27mm; text-align: right; \">{{ sum }}</td>\r\n// </tr>\r\n// {{/ each}}\r\n// </tbody>\r\n// </table>\r\n//\r\n// <table style=\"font-family: Arial;\" border=\"0\" width=\"100%\" cellpadding=\"1\" cellspacing=\"1\">\r\n//   <tr>\r\n//   <td></td>\r\n//   <td style=\"width:27mm; font-weight:bold;  text-align:right;\">Итого:</td>\r\n// <td style=\"width:27mm; font-weight:bold;  text-align: center; \">{{ total }}</td>\r\n// </tr>\r\n// <!--\r\n// <tr>\r\n// <td></td>\r\n// <td style=\"width:27mm; font-weight:bold;  text-align:right;\">Итого НДС:</td>\r\n// <td style=\"width:27mm; font-weight:bold;  text-align: center; \">0.00</td>\r\n//   </tr>\r\n//   -->\r\n//   <tr>\r\n//   <td></td>\r\n//   <td style=\"width:37mm; font-weight:bold;  text-align:right;\">Всего к оплате:</td>\r\n//   <td style=\"width:27mm; font-weight:bold;  text-align: center; \">{{ total }}</td>\r\n//   </tr>\r\n//   </table>\r\n//\r\n//   <br />\r\n//   <div style=\"font-family: Arial;\">\r\n//     Всего наименований {{products.length}} на сумму {{total}} рублей.<br />\r\n//   <!-- Ноль рублей 00 копеек --></div>\r\n//   <br /><br />\r\n//   <div style=\"background-color:#000000; width:100%; font-size:1px; height:2px;\">&nbsp;</div>\r\n//   <br/>\r\n//   <!--\r\n//   <div style=\"font-family: Arial; font-size: 10pt;\">\r\n//     1. Счет действителен в течении 5 (пяти) банковских дней, не считая дня выписки счета. В случае нарушения срока оплаты сохранение цены на товар и наличие товара на складе НЕ ГАРАНТИРУЕТСЯ.<br />\r\n//   2. Оплата данного счета означает согласие с условиями изложенными в п.1</div>\r\n//   <br />\r\n//   -->\r\n//   <br />\r\n//   <div style=\"background: url('<!--url печати в png сюда-->');  background-repeat: no-repeat; padding: 30px 10px; width: 400px; height: 250px;\">\r\n//     <div>Руководитель ______________________ </div>\r\n//   <br/>  <br /><br />\r\n//\r\n//   <div>Главный бухгалтер ______________________</div>\r\n//   <br/>\r\n//\r\n//   <div style=\"width: 85mm;text-align:center;\">М.П.</div>\r\n//     <br/>\r\n//     </div>\r\n//     <br/>  <br /><br /><br/>  <br /><br /><br/>  <br /><br />\r\n//\r\n//     </body>\r\n//     </html>\r\n","import React, { Component } from 'react';\r\nimport { DragDropContext, Draggable, Droppable } from 'react-beautiful-dnd';\r\n\r\nconst testItems = [\r\n  { id: '11', title: \"First task\" },\r\n  { id: '12', title: \"Second task\" },\r\n  { id: '13', title: \"Third task\" },\r\n  { id: '14', title: \"Fourth task\" },\r\n  { id: '15', title: \"Fifth task\" }\r\n];\r\n\r\nconst testData = [\r\n  {\r\n    id: 'id1',\r\n    title: 'col 1',\r\n    items: testItems,\r\n  },\r\n  {\r\n    id: 'id2',\r\n    title: 'col 2',\r\n  },\r\n];\r\n\r\nconst onDragEnd = (result, columns, setColumns, props) => {\r\n  if (!result.destination) return;\r\n  const { source, destination } = result;\r\n\r\n  let newColumns;\r\n\r\n  if (source.droppableId !== destination.droppableId) {\r\n    const sourceColumn = columns.find(item => item.id === source.droppableId);\r\n    const destColumn = columns.find(item => item.id === destination.droppableId);\r\n    const sourceItems = sourceColumn.items || [];\r\n    const destItems = destColumn.items || [];\r\n    sourceColumn.items = sourceItems;\r\n    destColumn.items = destItems;\r\n    const [removed] = sourceItems.splice(source.index, 1);\r\n    destItems.splice(destination.index, 0, removed);\r\n    newColumns = columns.slice();\r\n    setColumns(newColumns);\r\n    if (props.onDragEnd) {\r\n      props.onDragEnd(result);\r\n    }\r\n  } else {\r\n    const column = columns.find(item => item.id === source.droppableId);\r\n    const copiedItems = column.items;\r\n    const [removed] = copiedItems.splice(source.index, 1);\r\n    copiedItems.splice(destination.index, 0, removed);\r\n    newColumns = columns.slice();\r\n    setColumns(newColumns);\r\n  }\r\n  if (props.orderSaveKey) {\r\n    saveOrder(newColumns, props.orderSaveKey);\r\n  }\r\n};\r\n\r\nconst saveOrder = (data, key) => {\r\n  const order = data.reduce((acc, col) => {\r\n    const colOrder = (col.items || []).reduce((accItems, item, index) => {\r\n      accItems[item.id] = index;\r\n      return accItems;\r\n    }, {});\r\n    acc[col.id] = colOrder;\r\n    return acc;\r\n  }, {});\r\n  localStorage.setItem(key, JSON.stringify(order));\r\n};\r\n\r\nconst restoreOrder = (columns, key) => {\r\n  let order;\r\n  try {\r\n    order = JSON.parse(localStorage.getItem(key));\r\n  } catch {\r\n  }\r\n  if (!order) {\r\n    return;\r\n  }\r\n  columns.forEach((column) => {\r\n    const colsData = order[column.id];\r\n    if (colsData) {\r\n      (column.items || []).forEach((item) => {\r\n        const itemOrder = colsData[item.id];\r\n        if (itemOrder !== undefined) {\r\n          item.order = itemOrder;\r\n        } else {\r\n          item.order = Number.MAX_SAFE_INTEGER;\r\n        }\r\n      });\r\n      (column.items || []).sort((a, b) => (a.order - b.order));\r\n    }\r\n  });\r\n};\r\n\r\nexport default class Kanban extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { columns: this.props.data || [] };\r\n    const userStyles = {\r\n      container: {},\r\n      columnContainer: {},\r\n      columnHeader: {},\r\n      column: {},\r\n      columnDragOver: {},\r\n      item: {},\r\n      itemDragging: {},\r\n      ...(this.props.styles || {}),\r\n    };\r\n    this.styles = {\r\n      container: { display: \"flex\", justifyContent: \"center\", height: \"100%\", ...userStyles.container },\r\n      columnContainer: { display: \"flex\", flexDirection: \"column\", alignItems: \"center\", ...userStyles.columnContainer },\r\n      columnHeader: { ...userStyles.columnHeader },\r\n      column: { background: 'lightgrey', padding: 4, width: 250, minHeight: 500, ...userStyles.column },\r\n      columnDragOver: { background: 'lightblue', padding: 4, width: 250, minHeight: 500, ...userStyles.columnDragOver },\r\n      item: { userSelect: \"none\", padding: 16, margin: \"0 0 8px 0\", minHeight: \"50px\", backgroundColor: \"#456C86\", color: \"white\", ...userStyles.item },\r\n      itemDragging: { userSelect: \"none\", padding: 16, margin: \"0 0 8px 0\", minHeight: \"50px\", backgroundColor: \"#263B4A\", color: \"white\", ...userStyles.itemDragging },\r\n    };\r\n  }\r\n  setColumns = (columns) => {\r\n    this.setState({ columns });\r\n  };\r\n  itemClick(item) {\r\n    if (this.props.itemClick) {\r\n      this.props.itemClick(item);\r\n    }\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    if (this.props.data !== nextProps.data) {\r\n      const columns = nextProps.data.slice();\r\n      restoreOrder(columns, nextProps.orderSaveKey);\r\n      this.setState({ columns: nextProps.data });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const setColumns = this.setColumns;\r\n    const columns = this.state.columns;\r\n    const { t } = this.props;\r\n    return (\r\n      <div style={this.styles.container}>\r\n  <DragDropContext\r\n    onDragEnd={result => onDragEnd(result, columns, setColumns, this.props)}\r\n  >\r\n    {columns.map((column) => {\r\n      return (\r\n        <div\r\n          style={this.styles.columnContainer}\r\n          key={column.id}\r\n        >\r\n        <h2 style={this.styles.columnHeader}>{t(column.title)}</h2>\r\n        <div style={{ margin: 8 }}>\r\n    <Droppable droppableId={column.id} key={column.id}>\r\n        {(provided, snapshot) => {\r\n        return (\r\n          <div\r\n        {...provided.droppableProps}\r\n        ref={provided.innerRef}\r\n        style={snapshot.isDraggingOver ? this.styles.columnDragOver : this.styles.column }\r\n      >\r\n        {(column.items || []).map((item, index) => {\r\n          return (\r\n            <Draggable\r\n          key={item.id}\r\n          draggableId={item.id}\r\n          index={index}\r\n            >\r\n            {(provided, snapshot) => {\r\n            return (\r\n              <div\r\n            ref={provided.innerRef}\r\n            {...provided.draggableProps}\r\n            {...provided.dragHandleProps}\r\n            style={{\r\n                ...(snapshot.isDragging ? this.styles.itemDragging: this.styles.item),\r\n                ...provided.draggableProps.style,\r\n                ...(item.style || {})\r\n              }}\r\n              onClick={() => this.itemClick(item)}\r\n          >\r\n            {item.title}\r\n          </div>\r\n          );\r\n          }}\r\n        </Draggable>\r\n        );\r\n        })}\r\n        {provided.placeholder}\r\n      </div>\r\n      );\r\n      }}\r\n    </Droppable>\r\n      </div>\r\n      </div>\r\n    );\r\n    })}\r\n  </DragDropContext>\r\n    </div>\r\n  );\r\n  }\r\n}\r\n","import Kanban from './Kanban';\r\n\r\nexport default {\r\n  Kanban,\r\n};\r\n\r\n","export default [\n  {\n    date: '2019-03-20',\n    entity: 'System',\n    description: 'Автонумерация документов: при создании нового документа оставьте номер пустым - при сохранении номер будет присвоен автоматически',\n  },\n  {\n    date: '2019-03-24',\n    entity: 'Cashbox',\n    description: '\"Касса/счет\" - справочник мест хранений денежных средств. Используется в документах связанных с денежными средствами.',\n  },\n  {\n    date: '2019-03-24',\n    entity: 'Payment',\n    description: '\"Оплата\" - документ для отражения оплат от клиентов. В одном документе можно отразить несколько оплат от разных клиентов. Также в документе можно указать счет/кассу куда поступают денежные средства',\n  },\n  {\n    date: '2019-03-24',\n    entity: 'Order',\n    description: 'Отчет - \"Заказы к доставке\": формируется за определенный день. Выводит список заказов на день и колонку \"Оплатить\" в которой выводится сумма к оплате с учетом самого заказа.',\n  },\n  {\n    date: '2019-03-26',\n    entity: 'Payment',\n    description: 'Сумма \"Итого\" рассчитывается по сумме платежей от клиентов.',\n  },\n  {\n    date: '2019-03-26',\n    entity: 'Order',\n    description: 'Сумма в таблице расчитывается как кол-во * цена, при изменении количества или цены. Суммы \"Итого\" рассчитывается по сумме всех строк',\n  },\n  {\n    date: '2019-03-26',\n    entity: 'Expense',\n    description: 'Документ \"Расход\" предназначен для отражения расхода денежных средств',\n  },\n  {\n    date: '2019-03-29',\n    entity: 'Order',\n    description: 'В документе можно отразить оплату от клиента. Оплата может быть любой суммой - она будет учитываться при расчетах. В документе после выбора клиента можно открыть сверку расчетов.',\n  },\n  {\n    date: '2019-03-29',\n    entity: 'Cashbox',\n    description: 'Отчет \"Движение денег\" - формируется за период и отражает остатки на начало, движения и остатки на конец в разрезе счетов/касс',\n  },\n  {\n    date: '2019-03-29',\n    entity: 'System',\n    description: 'В полях выбора даты можно указать дату вручную в формате ДД.ММ.ГГГГ',\n  },\n  {\n    date: '2019-04-05',\n    entity: 'Agent app',\n    description: `Свободные заказы - отображаются заказы на выбранную дату не присвоенные ни одному агенту со статуслм \"Новый\". Их можно взять себе нажав на заказ и кнопку \"Принять заказ\".\n    Принятые к исполнению заказы отобажаются на странице \"Мои заказы\". При выполнении заказа следует указать сумму полученных денег. Если по данному заказу уже был платеж, поле с указанием суммы будет недоступно`,\n  },\n  {\n    date: '2019-04-05',\n    entity: 'Order',\n    description: 'Флаг \"Оплата агенту\" означает что деньги не приходуются в кассу, а числятся за агентом. Оприходовать их в кассу можно в документе \"Оплата\" заполнив по агенту',\n  },\n  {\n    date: '2019-04-05',\n    entity: 'Payment',\n    description: `Таблицу платежей можно заполнить плажами, полученными курьером в течении дня.\nПо кнопке \"Заполнить по агенту\" можно выбрать агента и нажать \"Применить\": таблица будет заполнена платежами полученными агентом за день даты документа.`,\n  },\n  {\n    date: '2019-04-14',\n    entity: 'Order',\n    description: 'Добавлен функционал печати товарного чека',\n  },\n  {\n    date: '2019-04-21',\n    entity: 'Cashbox',\n    description: 'Добавлен флаг \"Доступен агенту\" - счета, отмеченные этим флагом, могут быть выбраны агентом при указании оплаты от клиента',\n  },\n  {\n    date: '2019-04-21',\n    entity: 'Payment',\n    description: 'При заполнении документа по агенту можно выбрать \"Счет\", который указал агент при указании способа оплаты. При заполнении поступления наличных это поле следует оставить пустым.',\n  },\n  {\n    date: '2019-04-22',\n    entity: 'Order',\n    description: 'Отчет \"Динамика заказов\" позволяет увидеть количество и сумму заказов за период по дням',\n  },\n  {\n    date: '2019-06-10',\n    entity: 'System',\n    description: 'Элементы меню сгруппированы по типам',\n  },\n  {\n    date: '2019-08-30',\n    entity: 'Receipt',\n    description: 'Реализован учет остаток товаров. Добавлен документ Поступление и отчет Движение товаров',\n  },\n  {\n    date: '2020-03-30',\n    entity: 'System',\n    description: 'Реализована возможность печати документов и отчетов через стандартный диалог печати (Ctrl+P).',\n  },\n  {\n    date: '2020-04-19',\n    entity: 'Product',\n    description: 'На странице товара, при учете его остатков, отображается Карточка - отчет по всем движениям товара',\n  },\n  {\n    date: '2020-04-19',\n    entity: 'System',\n    description: 'Отчет Взаиморасчеты показывает состяние расчетов по всем контрагентам',\n  },\n];\n","import React from 'react';\n\nconst OrdersUnassigned = () => (\n  <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\" >\n    <path fill=\"#ffffff\" d=\"M4,2H14V4H4V14H2V4C2,2.89 2.89,2 4,2M8,6H18V8H8V18H6V8C6,6.89 6.89,6 8,6M12,10H20C21.11,10 22,10.89 22,12V20C22,21.11 21.11,22 20,22H12C10.89,22 10,21.11 10,20V12C10,10.89 10.89,10 12,10M14,12V20L20,16L14,12Z\" />\n  </svg>\n);\n\nconst OrderList = () => (\n  <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n    <path fill=\"#ffffff\" d=\"M4,2A2,2 0 0,0 2,4V14H4V4H14V2H4M8,6A2,2 0 0,0 6,8V18H8V8H18V6H8M20,12V20H12V12H20M20,10H12A2,2 0 0,0 10,12V20A2,2 0 0,0 12,22H20A2,2 0 0,0 22,20V12A2,2 0 0,0 20,10Z\" />\n  </svg>\n);\n\nconst OrdersToDeliverReport = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M16,6L19,10H21C22.11,10 23,10.89 23,12V15H21A3,3 0 0,1 18,18A3,3 0 0,1 15,15H9A3,3 0 0,1 6,18A3,3 0 0,1 3,15H1V12C1,10.89 1.89,10 3,10L6,6H16M10.5,7.5H6.75L4.86,10H10.5V7.5M12,7.5V10H17.14L15.25,7.5H12M6,13.5A1.5,1.5 0 0,0 4.5,15A1.5,1.5 0 0,0 6,16.5A1.5,1.5 0 0,0 7.5,15A1.5,1.5 0 0,0 6,13.5M18,13.5A1.5,1.5 0 0,0 16.5,15A1.5,1.5 0 0,0 18,16.5A1.5,1.5 0 0,0 19.5,15A1.5,1.5 0 0,0 18,13.5Z\" />\n  </svg>\n);\n\nconst CashFlow = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M19,3H14.82C14.4,1.84 13.3,1 12,1C10.7,1 9.6,1.84 9.18,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M12,3A1,1 0 0,1 13,4A1,1 0 0,1 12,5A1,1 0 0,1 11,4A1,1 0 0,1 12,3M5,15H8.11L9.62,12.15L10.38,17.92L14.07,13.21L15.89,15H19V19H5V15M19,13.46H16.53L13.93,10.86L11.44,14.05L10.5,7.08L7.17,13.46H5V5H7V6H17V5H19V6L19,13.46Z\" />\n  </svg>\n);\n\nconst ProductList = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#fff\" d=\"M14,8H10V6H14V8M20,4V20C20,21.11 19.11,22 18,22H6C4.89,22 4,21.11 4,20V4A2,2 0 0,1 6,2H18C19.11,2 20,2.9 20,4M18,13H6V20H18V13M18,4H6V11H18V4M14,15H10V17H14V15Z\" />\n  </svg>\n);\n\n\nconst ClientList = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M7.5,2A2,2 0 0,1 9.5,4A2,2 0 0,1 7.5,6A2,2 0 0,1 5.5,4A2,2 0 0,1 7.5,2M6,7H9A2,2 0 0,1 11,9V14.5H9.5V22H5.5V14.5H4V9A2,2 0 0,1 6,7M16.5,2A2,2 0 0,1 18.5,4A2,2 0 0,1 16.5,6A2,2 0 0,1 14.5,4A2,2 0 0,1 16.5,2M15,22V16H12L14.59,8.41C14.84,7.59 15.6,7 16.5,7C17.4,7 18.16,7.59 18.41,8.41L21,16H18V22H15Z\" />\n  </svg>\n);\n\nconst ProductSalesReport = () => (\n  <svg viewBox=\"0 0 24 24\" width=\"24\" height=\"24\">\n    <path fill=\"#ffffff\" d=\"M5,4H19A2,2 0 0,1 21,6V18A2,2 0 0,1 19,20H5A2,2 0 0,1 3,18V6A2,2 0 0,1 5,4M5,8V12H11V8H5M13,8V12H19V8H13M5,14V18H11V14H5M13,14V18H19V14H13Z\" />\n  </svg>\n);\n\nconst NoteList = () => (\n  <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\">\n    <g id=\"Frames-24px\">\n      <rect fill=\"none\" width=\"24\" height=\"24\"/>\n    </g>\n    <g id=\"Outline\">\n      <path fill=\"#ffffff\" d=\"M21,4h-7c-0.265,0-0.52,0.106-0.707,0.293L12,5.586l-1.293-1.293C10.52,4.106,10.265,4,10,4H3\n        C2.448,4,2,4.448,2,5v13c0,0.552,0.448,1,1,1h6.586l1.707,1.707C11.488,20.902,11.744,21,12,21s0.512-0.098,0.707-0.293L14.414,19\n        H21c0.552,0,1-0.448,1-1V5C22,4.448,21.552,4,21,4z M10,17H4V6h5.586L11,7.414v10.172l-0.293-0.293C10.52,17.106,10.265,17,10,17z\n        M20,17h-6c-0.265,0-0.52,0.106-0.707,0.293L13,17.586V7.414L14.414,6H20V17z\"/>\n    </g>\n  </svg>\n);\n\nconst CashboxList = () => (\n  <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\">\n    <g id=\"Frames-24px\">\n      <rect fill=\"none\" width=\"24\" height=\"24\"/>\n    </g>\n    <g id=\"Solid\">\n      <g>\n        <path fill=\"#ffffff\" d=\"M20,6V5h-2v1h-2V4c0-0.552-0.448-1-1-1H9C8.448,3,8,3.448,8,4v2H6V5H4v1C2.897,6,2,6.897,2,8v12c0,1.103,0.897,2,2,2h16c1.103,0,2-0.897,2-2V8C22,6.897,21.103,6,20,6z M10,5h4v1h-4V5z M20,20H4V8h16V20z\"/>\n        <path fill=\"#ffffff\" d=\"M13,9h-2v1.051c-1.14,0.232-2,1.242-2,2.449c0,1.378,1.122,2.5,2.5,2.5h1c0.276,0,0.5,0.224,0.5,0.5S12.776,16,12.5,16H9v2h2v1h2v-1.051c1.14-0.232,2-1.242,2-2.449c0-1.378-1.122-2.5-2.5-2.5h-1c-0.276,0-0.5-0.224-0.5-0.5s0.224-0.5,0.5-0.5H15v-2h-2V9z\"/>\n      </g>\n    </g>\n  </svg>\n);\n\nconst PaymentList = () => (\n  <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\">\n    <g id=\"Frames-24px\">\n      <rect fill=\"none\" width=\"24\" height=\"24\" />\n    </g>\n    <g id=\"Solid\">\n      <g>\n        <path fill=\"#ffffff\" d=\"M6.586,11h2.828l-2-2L14,2.415L17.586,6l-5,5h2.828l4.293-4.292c0.391-0.391,0.391-1.024,0-1.414l-5-5c-0.391-0.391-1.023-0.391-1.414,0l-8,8c-0.391,0.39-0.391,1.023,0,1.414L6.586,11z\"/>\n        <path fill=\"#ffffff\" d=\"M20,12H4c-0.552,0-1,0.448-1,1v10c0,0.552,0.448,1,1,1h16c0.552,0,1-0.448,1-1V13C21,12.448,20.552,12,20,12z M19,22H5v-8h14V22z\"/>\n        <polygon fill=\"#ffffff\" points=\"11,21 13,21 13,19 15,19 15,17 13,17 13,15 11,15 11,17 9,17 9,19 11,19\" />\n        <circle fill=\"#ffffff\" cx=\"12.5\" cy=\"7.5\" r=\"1.5\" />\n      </g>\n    </g>\n  </svg>\n);\n\nconst ExpenseList = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M5,6H23V18H5V6M14,9A3,3 0 0,1 17,12A3,3 0 0,1 14,15A3,3 0 0,1 11,12A3,3 0 0,1 14,9M9,8A2,2 0 0,1 7,10V14A2,2 0 0,1 9,16H19A2,2 0 0,1 21,14V10A2,2 0 0,1 19,8H9M1,10H3V20H19V22H1V10Z\" />\n  </svg>\n);\n\nconst OrderDynamics = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M3,13H7V23H3V13M10,14H14V23H10V14M17,9H21V23H17V9M17,1H21V5H20V3.06L11.97,11.09L8,7.12L3.4,11.72L2.34,10.66L8,5L11.97,8.97L18.94,2H17V1Z\" />\n  </svg>\n);\n\nconst Dashboard = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M21,16V4H3V16H21M21,2A2,2 0 0,1 23,4V16A2,2 0 0,1 21,18H14V20H16V22H8V20H10V18H3C1.89,18 1,17.1 1,16V4C1,2.89 1.89,2 3,2H21M5,6H14V11H5V6M15,6H19V8H15V6M19,9V14H15V9H19M5,12H9V14H5V12M10,12H14V14H10V12Z\" />\n  </svg>\n);\n\nconst ReceiptList = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M12,17L7,12H10V8H14V12H17L12,17M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z\" />\n  </svg>\n);\n\nconst PriceListList = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M6,10H7V3H14.5C17,3 19,5 19,7.5C19,10 17,12 14.5,12H9V14H15V16H9V21H7V16H6V14H7V12H6V10M14.5,5H9V10H14.5A2.5,2.5 0 0,0 17,7.5A2.5,2.5 0 0,0 14.5,5Z\" />\n  </svg>\n);\n\nconst PriceTypeList = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M5,9.5L7.5,14H2.5L5,9.5M3,4H7V8H3V4M5,20A2,2 0 0,0 7,18A2,2 0 0,0 5,16A2,2 0 0,0 3,18A2,2 0 0,0 5,20M9,5V7H21V5H9M9,19H21V17H9V19M9,13H21V11H9V13Z\" />\n  </svg>\n);\n\nconst ProductsFlowReport = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M2,3H19A2,2 0 0,1 21,5V9H19V5H2V19H19V15H21V19A2,2 0 0,1 19,21H2A2,2 0 0,1 0,19V5A2,2 0 0,1 2,3M17,15V13H24V11H17V9L13,12L17,15M4,13H11V11H4V13M4,9H11V7H4V9M4,17H8V15H4V17Z\" />\n  </svg>\n);\n\nconst DebtsFlowReport = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M16,10H22L12,0L2,10H8V14H2L12,24L22,14H16V10M14,16H17L12,21L7,16H10V8H7L12,3L17,8H14V16Z\" />\n  </svg>\n);\n\nconst TaskList = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M19,19H5V8H19M19,3H18V1H16V3H8V1H6V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M16.53,11.06L15.47,10L10.59,14.88L8.47,12.76L7.41,13.82L10.59,17L16.53,11.06Z\" />\n  </svg>\n);\n\nconst DealList = () => (\n  <svg version=\"1.1\"  width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M3,6H21V18H3V6M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M7,8A2,2 0 0,1 5,10V14A2,2 0 0,1 7,16H17A2,2 0 0,1 19,14V10A2,2 0 0,1 17,8H7Z\" />\n  </svg>\n);\n\nconst InvoiceList = () => (\n  <svg version=\"1.1\"  width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n    <path fill=\"#ffffff\" d=\"M16,15H9V13H16V15M19,11H9V9H19V11M19,7H9V5H19V7M3,5V21H19V23H3A2,2 0 0,1 1,21V5H3M21,1A2,2 0 0,1 23,3V17C23,18.11 22.11,19 21,19H7A2,2 0 0,1 5,17V3C5,1.89 5.89,1 7,1H21M7,3V17H21V3H7Z\" />\n  </svg>\n);\n\nexport default {\n  OrderList,\n  OrdersMy: OrderList,\n  OrdersUnassigned,\n  CashFlow,\n  ProductList,\n  ClientList,\n  OrdersToDeliverReport,\n  ProductSalesReport,\n  NoteList,\n  CashboxList,\n  ExpenseList,\n  PaymentList,\n  OrderDynamics,\n  Dashboard,\n  ReceiptList,\n  PriceListList,\n  PriceTypeList,\n  ProductsFlowReport,\n  DebtsFlowReport,\n  TaskList,\n  DealList,\n  InvoiceList,\n};\n","import { use } from 'katejs/lib/client';\r\nimport { AppDoc, AppDocs, AppPrint, AppSettings, AppImport, AppUser } from 'katejs-modules/lib/client';\r\nimport AppTrigger from './katejs-trigger/lib/AppClient';\r\nimport AppFields from './katejs-fields/lib/AppClient'\r\nimport AppModules from './katejs-runtime-modules/lib/AppClient';\r\n\r\n// eslint-disable-next-line import/no-extraneous-dependencies\r\nimport 'moment/locale/ru';\r\nimport 'katejs/lib/client.css';\r\n\r\nimport { structures, title, packageName, Settings } from './structure';\r\n\r\nimport NoteItem from './forms/NoteItem';\r\nimport NoteList from './forms/NoteList';\r\nimport ProductSalesReport from './forms/ProductSalesReport';\r\nimport OrdersToDeliverReport from './forms/OrderToDeliverReport';\r\nimport OrderList from './forms/OrderList';\r\nimport OrderItem from './forms/OrderItem';\r\nimport PaymentItem from './forms/PaymentItem';\r\nimport CashFlow from './forms/CashFlow';\r\nimport OrderDynamics from './forms/OrderDynamics';\r\nimport ClientListMixin from './forms/ClientListMixin';\r\nimport ClientItemMixin from './forms/ClientItemMixin';\r\nimport Dashboard from './forms/Dashboard';\r\nimport ExpenseItem from './forms/ExpenseItem';\r\nimport ReceiptItemMixin from './forms/ReceiptItemMixin';\r\nimport ProductsFlowReport from './forms/ProducsFlowReport';\r\nimport DebtsFlowReport from './forms/DebtsFlowReport';\r\nimport ProductItemMixin from './forms/ProductItemMixin';\r\nimport DealItem from './forms/DealItem';\r\nimport TaskItem from './forms/TaskItem';\r\nimport DealList from './forms/DealList';\r\nimport SaleSchemaItem from './forms/SaleSchemaItem';\r\nimport TaskList from './forms/TaskList';\r\nimport InvoiceItem from './forms/InvoiceItem';\r\n\r\nimport Components from './components';\r\n\r\nimport updates from './updates';\r\nimport logo from './oktopad.svg';\r\nimport icons from './icons';\r\n\r\nimport env from './front.env.json';\r\n\r\nconst AppClient = parent => class Client extends\r\n  use(parent, AppUser, AppDoc, AppPrint, AppSettings, AppDocs, AppImport, AppTrigger, AppFields, AppModules) {\r\n  static title = title;\r\n  static path = '/app';\r\n  static primaryColor = '#088596';\r\n  static logo = logo;\r\n  // static useLogger = true;\r\n  constructor(params) {\r\n    super(params);\r\n    this.constructor.components = { ...this.constructor.components, ...Components };\r\n\r\n    this.baseUrl = env.apiUrl || '/api';\r\n\r\n    this.vars = {};\r\n\r\n    this.menu.unshift(\r\n      {\r\n        title: 'Reports',\r\n        icon: icons.OrderDynamics,\r\n        rule: { entity: 'Order', method: 'put' },\r\n        submenu: [\r\n          {\r\n            form: 'ProductSalesReport',\r\n            title: 'Product sales',\r\n          },\r\n          {\r\n            form: 'OrdersToDeliverReport',\r\n            title: 'Orders to deliver',\r\n          },\r\n          {\r\n            form: 'CashFlow',\r\n            title: 'Cash flow',\r\n          },\r\n          {\r\n            form: 'OrderDynamics',\r\n            title: 'Order dynamics',\r\n          },\r\n          {\r\n            form: 'ProductsFlowReport',\r\n            title: 'Product flow',\r\n          },\r\n          {\r\n            form: 'DebtsFlowReport',\r\n            title: 'Debt flow',\r\n          },\r\n        ],\r\n      },\r\n    );\r\n\r\n    this.init({ structures, addToMenu: true });\r\n    this.forms = {\r\n      ...this.forms,\r\n      NoteItem,\r\n      NoteList,\r\n      OrderList: OrderList(this.forms.OrderList),\r\n      OrderItem: OrderItem(this.forms.OrderItem),\r\n      PaymentItem,\r\n      ClientList: ClientListMixin(this.forms.ClientList),\r\n      ClientItem: ClientItemMixin(this.forms.ClientItem),\r\n      ProductItem: ProductItemMixin(this.forms.ProductItem),\r\n      DealItem: DealItem(this.forms.DealItem),\r\n      TaskItem: TaskItem(this.forms.TaskItem),\r\n      DealList: DealList(this.forms.DealList),\r\n      SaleSchemaItem: SaleSchemaItem(this.forms.SaleSchemaItem),\r\n      TaskList: TaskList(this.forms.TaskList),\r\n      InvoiceItem: InvoiceItem(this.forms.InvoiceItem),\r\n\r\n      ProductSalesReport,\r\n      OrdersToDeliverReport,\r\n      CashFlow,\r\n      OrderDynamics,\r\n      Dashboard,\r\n      ExpenseItem,\r\n      ReceiptItem: ReceiptItemMixin(this.forms.ReceiptItem),\r\n      ProductsFlowReport,\r\n      DebtsFlowReport,\r\n     };\r\n\r\n    this.forms.PaymentList.doc = true;\r\n    this.forms.ExpenseList.doc = true;\r\n    this.forms.ExpenseItem.doc = true;\r\n    this.forms.PriceListList.doc = true;\r\n    this.forms.PriceListItem.doc = true;\r\n    this.forms.ReceiptList.doc = true;\r\n    this.forms.InvoiceList.doc = true;\r\n\r\n    this.saveAuth = true;\r\n    this.docsContent.push(...updates);\r\n\r\n    this.userAuthorization = {\r\n      usernameTitle: 'User',\r\n    };\r\n    this.userHideRecovery = true;\r\n\r\n    this.docsAccessFilter = (docsItem) => {\r\n      if (docsItem.entity === 'System') return true;\r\n      if (docsItem.entity === 'Agent app') return this.allow('Order', 'put') || this.allow('Order', 'take');\r\n      return this.allow(docsItem.entity, 'put');\r\n    };\r\n\r\n    // temp no dasboard\r\n    // this.menu.unshift({\r\n    //   title: 'Dashboard',\r\n    //   form: 'Dashboard',\r\n    //   rule: {\r\n    //     entity: 'Order',\r\n    //     method: 'put',\r\n    //   },\r\n    // });\r\n\r\n    this.menu.forEach((item) => {\r\n      if (icons[item.form]) {\r\n        // eslint-disable-next-line no-param-reassign\r\n        item.icon = icons[item.form];\r\n      }\r\n      if (item.submenu) {\r\n        item.submenu.forEach((sitem) => {\r\n          if (icons[sitem.form]) {\r\n            // eslint-disable-next-line no-param-reassign\r\n            sitem.icon = icons[sitem.form];\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    this.menu.forEach((menuItem) => {\r\n      if (this.forms[menuItem.form] && this.forms[menuItem.form].entity) {\r\n        // eslint-disable-next-line no-param-reassign\r\n        menuItem.rule = {\r\n          entity: this.forms[menuItem.form].entity,\r\n          method: 'put',\r\n        };\r\n      }\r\n      if (menuItem.submenu) {\r\n        menuItem.submenu.forEach((submenuItem) => {\r\n          if (this.forms[submenuItem.form] && this.forms[submenuItem.form].entity) {\r\n            // eslint-disable-next-line no-param-reassign\r\n            submenuItem.rule = {\r\n              entity: this.forms[submenuItem.form].entity,\r\n              method: 'put',\r\n            };\r\n          }\r\n        });\r\n      }\r\n    });\r\n    this.settingsParams = Settings;\r\n\r\n    this.menu.unshift(\r\n      this.spliceMenuItem('Deals'),\r\n      this.spliceMenuItem('Tasks'),\r\n      this.spliceMenuItem('Clients'),\r\n    );\r\n    this.spliceMenuItem('Extra field values lists'); // temp - remove from menu\r\n    this.spliceMenuItem('Contacts'); // temp - remove from menu\r\n    this.spliceMenuItem('What\\'s new'); // temp\r\n    this.spliceMenuItem('Entity descriptions'); // temp\r\n    this.spliceMenuItem('Notes'); // temp\r\n\r\n    this.entitiesWithExtraFields = ['Deal', 'Task', 'Client'];\r\n\r\n    // adjust roles\r\n    const supportRule = { entity: 'Role', method: 'put' };\r\n    this.getMenuItem('Triggers').rule = supportRule;\r\n    this.getMenuItem('Import').rule = supportRule;\r\n    this.getMenuItem('Print templates').rule = supportRule;\r\n    this.getMenuItem('Price types').rule = supportRule;\r\n    this.getMenuItem('Price lists').rule = supportRule;\r\n    this.getMenuItem('Roles').rule = supportRule;\r\n\r\n    // make submenu\r\n    this.initSubmenu('Payments', 'Money');\r\n    this.addSubmenu('Money', 'Expenses');\r\n    this.addSubmenu('Money', 'Cashboxs');\r\n    this.initSubmenu('Products', 'Products');\r\n    this.addSubmenu('Products', 'Price types');\r\n    this.addSubmenu('Products', 'Price lists');\r\n    this.addSubmenu('Products', 'Receipts');\r\n    this.initSubmenu('Settings', 'Settings', 'Basic');\r\n    this.addSubmenu('Settings', 'Sale schemas');\r\n    this.addSubmenu('Settings', 'Extra fields  lists');\r\n    this.addSubmenu('Settings', 'Triggers');\r\n    this.addSubmenu('Settings', 'Import');\r\n    this.addSubmenu('Settings', 'Print templates');\r\n    this.addSubmenu('Settings', 'Users');\r\n    this.addSubmenu('Settings', 'Roles');\r\n\r\n    this.allowCreateInSelect = true;\r\n    this.schemas = {};\r\n\r\n    this.showUsersList = true;\r\n\r\n    this.modules = {\r\n      school: () => import('./modules/school/Client'),\r\n    }\r\n  }\r\n  initSubmenu(nameInitial, nameTarget, submenuTitle = '') {\r\n    const item = this.menu.find(i => i.title === nameInitial);\r\n    item.submenu = [];\r\n    item.submenu.push({\r\n      title: submenuTitle || item.title,\r\n      form: item.form,\r\n      icon: item.icon,\r\n      role: item.role,\r\n    });\r\n    item.title = nameTarget;\r\n    delete item.form;\r\n  }\r\n  addSubmenu(submenuName, itemName) {\r\n    const itemIndex = this.menu.findIndex(i => i.title === itemName);\r\n    const submenu = this.menu.find(i => i.title === submenuName);\r\n    if (!this.menu[itemIndex].icon) {\r\n      this.menu[itemIndex].icon = submenu.icon;\r\n    }\r\n    submenu.submenu.push(this.menu[itemIndex]);\r\n    this.menu.splice(itemIndex, 1);\r\n  }\r\n\r\n  spliceMenuItem(itemTitle) {\r\n    const index = this.menu.findIndex(item => item.title === itemTitle);\r\n    if (index > -1) {\r\n      return this.menu.splice(index, 1)[0];\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  getMenuItem(itemTitle) {\r\n    return this.menu.find(item => item.title === itemTitle);\r\n  }\r\n\r\n  async afterUserInit() {\r\n    if (super.afterUserInit) {\r\n      await super.afterUserInit();\r\n    }\r\n    await this.fetchSchemas();\r\n  }\r\n  async fetchSchemas() {\r\n    const { response: schemas } = await this.SaleSchema.query();\r\n    if (!schemas) return;\r\n    this.schemas = schemas.reduce((acc, val) => ({ ...acc, [val.uuid]: val}), {});\r\n  }\r\n};\r\nAppClient.package = packageName;\r\nexport default AppClient;\r\n","import { Elements } from 'katejs/lib/client';\nimport ProductCard from './ProductCard';\nimport { reportStyle } from './ClientItemMixin';\n\nexport default Form => class ProductItem extends Form {\n  constructor(args) {\n    super(args);\n\n    this.productCard = new ProductCard({\n      app: this.app,\n      productUuid: args.params.id,\n      content: this.content,\n    });\n\n    this.elements = [\n      {\n        type: Elements.GRID,\n        id: 'pcGrid',\n        elements: [\n          {\n            type: Elements.GROUP,\n            elements: [\n              ...this.elements,\n            ],\n            cols: 12,\n          },\n          {\n            id: 'pcGridRight',\n            type: Elements.GROUP,\n            hidden: true,\n            elements: [\n              ...this.productCard.elements,\n            ],\n            div: true,\n            style: reportStyle,\n            cols: 6,\n          },\n        ],\n      },\n    ];\n    this.elements.get('accountBalances').onChange = () => this.setCardVisibility();\n  }\n  async load() {\n    const result = await super.load();\n    this.setCardVisibility();\n    return result;\n  }\n  setCardVisibility() {\n    const showCard = this.content.accountBalances.value;\n    const cols = showCard ? 6 : 12;\n    this.content.pcGrid.elements = [\n      { ...this.content.pcGrid.elements[0], cols },\n      this.content.pcGrid.elements[1],\n    ];\n    this.content.pcGridRight.hidden = !showCard;\n  }\n};\n","import translations from 'katejs/lib/translations';\r\n\r\n/* eslint-disable quote-props */\r\nconst translate = {\r\n  languages: ['ru'],\r\n  ru: {\r\n    ...translations.ru,\r\n    'Assistant': 'Ассистент',\r\n    'Prev': 'Пред.',\r\n    'Next': 'След.',\r\n    'Notes': 'Заметки',\r\n    'Note': 'Заметкa',\r\n    'Note done': 'Завершено',\r\n    'Done': 'Выполнено',\r\n    'Description': 'Описание',\r\n    'Checklist': 'Список',\r\n    'Show all': 'Показывать все',\r\n    'NoteDone': 'Завершено',\r\n    'Orders': 'Заказы',\r\n    'Order': 'Заказ',\r\n    'Product': 'Товар',\r\n    'Products': 'Товары',\r\n    'Date': 'Дата',\r\n    'Number': 'Номер',\r\n    'Clients': 'Клиенты',\r\n    'Client': 'Клиент',\r\n    'Phone': 'Телефон',\r\n    'Total': 'Итого',\r\n    'Amount': 'Количество',\r\n    'Price': 'Цена',\r\n    'Sum': 'Сумма',\r\n    'Product sales': 'Продажи товаров',\r\n    'Form report': 'Сформировать',\r\n    'Period start': 'Начало периода',\r\n    'Period end': 'Конец периода',\r\n    'Address': 'Адрес',\r\n    'Comment': 'Комментарий',\r\n    'Period': 'Период',\r\n    'Apply': 'Применить',\r\n    'Paid': 'Оплачено',\r\n    'To pay': 'Оплатить',\r\n    'Find, create': 'Найти, создать',\r\n    'Find, create client': 'Найти, создать клиента',\r\n    'Client (name, phone, address)': 'Клиент (имя, телефон, адрес)',\r\n    'Search (name, phone, address)': 'Поиск (имя, телефон, адрес)',\r\n    'Spread payment': 'Распределить оплату',\r\n    'Spread': 'Распределить',\r\n    'Spread payment from ': 'Распределение оплаты от ',\r\n    'Doing spread...': 'Распределяем...',\r\n    'No sum!': 'Нет суммы',\r\n    'Spreaded ': 'Распределено ',\r\n    ' to order ': ' на заказ ',\r\n    'Rest sum ': 'Остаточная суммма ',\r\n    ' from ': ' от ',\r\n    'What\\'s new': 'Информация',\r\n    'Payments': 'Оплаты',\r\n    'Payment': 'Оплата',\r\n    'Clientpayments': 'Оплаты клиентов',\r\n    'Cashboxs': 'Кассы/счета',\r\n    'Cashbox': 'Касса/счет',\r\n    'Fill by debts': 'Заполнить по расчетам',\r\n    'Orders to deliver': 'Заказы к доставке',\r\n    'Show negative sum': 'Показывать отрицательные суммы',\r\n    'Expenses': 'Расходы',\r\n    'Expense': 'Расход',\r\n    'Apply payment': 'Провести платеж',\r\n    'Clients debt ': 'Долг клиента ',\r\n    'Client debt': 'Расчеты с клиентом',\r\n    'Document': 'Документ',\r\n    'Sale': 'Продажа',\r\n    'Cash flow': 'Движение денег',\r\n    'Cashbox/Document': 'Касса/счет / Документ',\r\n    'Login': 'Вход',\r\n    'Registration': 'Регистрация',\r\n    'Register': 'Зарегистрироваться',\r\n    'Forgot your password?': 'Забыли пароль?',\r\n    'Confirm password': 'Подтвердите пароль',\r\n    'Your name': 'Ваше имя',\r\n    'Go to authorization': 'Перейти к авторизации',\r\n    'Password recovery': 'Восстановление пароля',\r\n    'Recover password': 'Восстановить пароль',\r\n    'Your account has been created.': 'Ваш аккаунт создан!',\r\n    'Discount sum': 'Сумма скидки',\r\n    'Agent': 'Агент',\r\n    'Status': 'Статус',\r\n    'New': 'Новый',\r\n    'Assigned': 'Назначен',\r\n    'Completed': 'Завершен',\r\n    'To agent': 'Агенту',\r\n    'Payment to agent': 'Платеж агенту',\r\n    'Unassigned orders': 'Свободные заказы',\r\n    'My orders': 'Мои заказы',\r\n    'Take order': 'Принять заказ',\r\n    'Consist': 'Состав',\r\n    'Money received \\nOrder completed': 'Деньги получены\\nЗаказ выполнен',\r\n    'Received': 'Получено',\r\n    'Fill by agent': 'Заполнить по агенту',\r\n    'System': 'Система',\r\n    'Agent app': 'Приложение агента',\r\n    'Settings': 'Настройки',\r\n    'Print': 'Печать',\r\n    'Start': 'На начало',\r\n    'Increase': 'Увеличение',\r\n    'Decrease': 'Уменьшение',\r\n    'Details': 'Детали',\r\n    'Card payment': 'Оплата картой',\r\n    'Terminal': 'Терминал',\r\n    'Available to agent': 'Доступен агенту',\r\n    'Order dynamics': 'Динамика заказов',\r\n    'Create': 'Создать',\r\n    'Yesterday': 'Вчера',\r\n    'Today': 'Сегодня',\r\n    'Tomorrow': 'Завтра',\r\n    'Prev week': 'Пред неделя',\r\n    'This week': 'Эта неделя',\r\n    'Next week': 'След неделя',\r\n    'Clients sales': 'Продажи клиенту',\r\n    'Sales count': 'Количество продаж',\r\n    'Sales sum': 'Сумма продаж',\r\n    'Sales average sum': 'Средний чек',\r\n    'Profile': 'Профиль',\r\n    'Your email (username)': 'Ваш email (логин)',\r\n    'Name': 'Имя',\r\n    'Passwords match': 'Пароли совпадают',\r\n    'Passwords do not match': 'Пароли не совпадают',\r\n    'Dashboard': 'Рабочий стол',\r\n    'Price lists': 'Цены',\r\n    'PriceList': 'Прайс-лист',\r\n    'Import': 'Импорт',\r\n    'Entity': 'Справочник',\r\n    'Months count': 'Кол-во месяцев',\r\n    'Pay': 'Оплатить',\r\n    'Your tariff: ': 'Ваш тариф: ',\r\n    '. Ends at: ': '. Заканчивается: ',\r\n    'Search (name or email)': 'Поиск (имя или почта)',\r\n    'All': 'Все',\r\n    'Active': 'Активные',\r\n    'Inactive': 'Неактивный',\r\n    'Manager': 'Менеджер',\r\n    'Limits': 'Ограничения',\r\n    'current month': 'текущий месяц',\r\n    'Account quota exceeded!': 'Квота аккаунта превышена!',\r\n    'Money': 'Деньги',\r\n    'Reports': 'Отчеты',\r\n    'Price types': 'Типы цен',\r\n    'Price type': 'Тип цен',\r\n    'Receipts': 'Поступления',\r\n    'Receipt': 'Поступление',\r\n    'Contractor': 'Контрагент',\r\n    'Product flow': 'Движение товаров',\r\n    'Account balances': 'Учитывать остатки',\r\n    'Company name': 'Название компании',\r\n    'Detail to document': 'Детализировать до документа',\r\n    'User with this e-mail already exist': 'Пользователь с таким e-mail уже существует',\r\n    'Password reset': 'Сброс пароля',\r\n    'Set new password': 'Установить новый пароль',\r\n    'Account activation': 'Активация',\r\n    'Activation code': 'Код активации',\r\n    'Account': 'Учетная запись',\r\n    'Activate': 'Активировать',\r\n    'User inactive!': 'Учетная запись не активирована! Проверьте почту!',\r\n    'Debt flow': 'Взаиморасчеты',\r\n    'Client/Document': 'Клиент/Документ',\r\n    'Client debts': 'Долги клиентов',\r\n    'Product card': 'Карточка товара',\r\n    'Rest: ': 'Остаток: ',\r\n    'Deals': 'Сделки',\r\n    'Deal': 'Сделка',\r\n    'Tasks': 'Задачи',\r\n    'Task': 'Задачa',\r\n    'New Task': 'Новая задачa',\r\n    'Triggers': 'Триггеры',\r\n    'Trigger': 'Триггер',\r\n    'Extra fields lists': 'Дополнительные поля',\r\n    'Extra fields  lists': 'Доп. поля',\r\n    'Extra fields list': 'Список дополнительных полей',\r\n    'Entity name': 'Сущность',\r\n    'Fields list': 'Список полей',\r\n    'Condition entity': 'Сущность источник',\r\n    'Condition': 'Условие',\r\n    'Action entity': 'Целевая сущность',\r\n    'Action entity uuid': 'Целевой uuid (необязательно)',\r\n    'Action entity fields': 'Поля целевой сущности',\r\n    'Field': 'Поле',\r\n    'Values': 'Значение',\r\n    'Salesman': 'Специалист по продажам',\r\n    'Contacts': 'Контакты',\r\n    'Contact': 'Контакт',\r\n    'Schemas': 'Схемы',\r\n    'Schema': 'Схема',\r\n    'Steps': 'Шаги',\r\n    'Step': 'Шаг',\r\n    'by': 'от',\r\n    'at': 'из',\r\n    'Do Comment': 'Комментировать',\r\n    'Add Task': 'Добавить задачу',\r\n    'On date': 'На дату',\r\n    'for': 'для',\r\n    'New Deal': 'Новая сделка',\r\n    'List': 'Список',\r\n    'Borad': 'Доска',\r\n    'Order': 'Продажа',\r\n    'Orders': 'Продажи',\r\n    'Sale schemas': 'Схемы продаж',\r\n    'Sale schema': 'Схема продаж',\r\n    'Default schema': 'Схема по умолчанию',\r\n    'Expired': 'Просрочено',\r\n    'Day After Tomorrow': 'Послезавтра',\r\n    'Later': 'Позже',\r\n    'Print templates': 'Шаблоны печати',\r\n    'Print template': 'Шаблон печати',\r\n    'Hide Done': 'Скрыть выполненные',\r\n    'Step index': 'Шаг',\r\n    'Deal closed': 'Сделка закрыта',\r\n    'Hide Closed': 'Скрыть закрытые',\r\n    'Board': 'Доска',\r\n    'Closed': 'Закрыто',\r\n    'Basic': 'Базовые',\r\n    'Company inn': 'ИНН',\r\n    'Company kpp': 'КПП',\r\n    'Company bank name': 'Название банка',\r\n    'Company bank code': 'БИК',\r\n    'Company bank corr account': 'Корр. счет',\r\n    'Company bank account': 'Номер счета',\r\n    'To Client': 'К Клиенту',\r\n    'Invoices': 'Счета',\r\n    'Invoice': 'Счет',\r\n  },\r\n};\r\n\r\nexport default translate;\r\n","import KateJSClient from 'katejs/lib/client';\r\n\r\nimport AppClient from './AppClient';\r\nimport translations from './translations';\r\n\r\nKateJSClient({ AppClient, translations });\r\n"],"sourceRoot":""}